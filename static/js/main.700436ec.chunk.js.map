{"version":3,"sources":["redux/actions/ActionTypes.ts","redux/actions/Actions.ts","utils/serverUtils.ts","components/landing/RoomConnect.tsx","components/landing/Landing.tsx","components/room/PlayerList.tsx","components/room/ColourPicker.tsx","components/room/Room.tsx","components/canvas/Palette.tsx","components/canvas/Canvas.tsx","components/game/GuessSpyPanel.tsx","components/game/InfoPanel.tsx","components/game/Timer.tsx","components/game/GameEnd.tsx","components/game/Game.tsx","App.tsx","utils/sessionStorageUtils.ts","serviceWorker.ts","redux/reducers/RootReducer.ts","index.tsx","redux/datastore/StoreManager.ts"],"names":["SET_ROOM","SET_NAME","ADD_PLAYER","SET_PLAYER_COLOUR","SET_POSSIBLE_ROLES","SET_ROLE","ADD_LINES","SET_PLAYING","SET_TIME","SET_ACTIVE_PLAYER","SET_GAME_WORD","SET_GUESSING","SET_CORRECT_GUESS","END_GAME","SET_STATE","Actions","setRoom","room","type","ActionTypes","payload","setName","name","setPlayers","names","setPlayerColour","playerName","colour","setPossibleRoles","roles","setRole","role","setPlaying","playing","setTime","time","addLines","lines","setActivePlayer","currentPlayerPosition","setGameWord","word","startGuess","player","guessing","endGuess","submitGuess","correct","endGame","spy","setState","state","url","window","location","protocol","socket","WebSocket","pingServer","a","Promise","resolve","addEventListener","catch","e","console","error","submitLines","code","strokeStyle","lineWidth","content","send","JSON","stringify","listenForMessage","callback","event","data","parse","ClassName","RoomConnect","dispatch","useDispatch","useState","setCode","nameError","setNameError","roomCodeError","setRoomCodeError","history","useHistory","className","TextField","value","color","placeholder","onChange","target","fullWidth","inputProps","style","fontSize","Button","variant","onClick","submitRoomCode","push","generateRoomCode","Landing","log","connect","players","playerColourMap","Consumer","store","getState","background","map","index","key","colours","setColour","roomCode","obj","id","isColourAvailable","useLocation","pathname","startRoomGame","Palette","props","setColor","setStrokeStyle","setLineWidth","width","height","Canvas","useSelector","canvasLines","canvas","ctx","line","startX","startY","endX","endY","linesToSend","alreadySent","pressedFlag","useEffect","document","getElementById","canDraw","setCanvas","handleMouseMove","handleMouseDown","handleMouseUp","handleMouseOut","addLinesFromServer","removeEventListener","setTimeout","adjustedLines","resizeLinesForServer","clientX","offsetLeft","clientY","offsetTop","touches","beginPath","fillStyle","fillRect","closePath","preventDefault","Object","assign","draw","onEndStroke","moveTo","lineTo","stroke","resizeLinesForCanvas","getContext","canvasWidth","innerWidth","canvasHeight","innerHeight","onresize","border","showPalette","position","top","left","GuessSpyPanel","onSubmit","guessedName","onClose","Modal","open","aria-labelledby","aria-describedby","guessingPlayer","playerNames","backgroundColor","InfoPanel","onGuessPressed","Timer","startingSeconds","timerSeconds","setTimerSeconds","gameEnded","seconds","minutes","Math","floor","remainingSeconds","minutesDisplay","secondsDisplay","convertSecondsToTimer","GameEnd","guessedSpy","EXTRA_ROLES","roleName","roleCount","Game","ConnectState","gameState","gameWord","possibleRoles","activePlayer","length","info","sessionStorage","setItem","SessionStorageKey","SessionStorageUtils","playerCount","keys","totalExtraRoles","defaultRole","allRoles","concat","getRole","getGameWord","getFirstPlayer","getItem","isActivePlayer","endTurn","App","LOADING","connected","setConnected","success","handleServerMessage","CONNECTED","FAILED","attemptConnection","message","linesFromPlayer","exact","path","Boolean","hostname","match","initialState","RootReducer","action","isGuessing","partialState","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.700436ec.chunk.js","sourcesContent":["export const SET_ROOM = \"SET_ROOM\";\r\nexport const SET_NAME = \"SET_NAME\";\r\nexport const ADD_PLAYER = \"ADD_PLAYER\";\r\nexport const SET_PLAYER_COLOUR = \"SET_PLAYER_COLOUR\";\r\nexport const SET_POSSIBLE_ROLES = \"SET_POSSIBLE_ROLES\";\r\nexport const SET_ROLE = \"SET_ROLE\";\r\nexport const ADD_LINES = \"ADD_LINES\";\r\nexport const SET_PLAYING = \"SET_PLAYING\";\r\nexport const SET_TIME = \"SET_TIME\";\r\nexport const SET_PLAYER_ORDER = \"SET_PLAYER_ORDER\";\r\nexport const SET_ACTIVE_PLAYER = \"SET_ACTIVE_PLAYER\";\r\nexport const SET_GAME_WORD = \"SET_GAME_WORD\";\r\nexport const SET_GUESSING = \"SET_GUESSING\";\r\nexport const SET_CORRECT_GUESS = \"SET_CORRECT_GUESS\";\r\nexport const END_GAME = \"END_GAME\";\r\nexport const SET_STATE = \"SET_STATE\";\r\n","import * as ActionTypes from \"./ActionTypes\";\r\nimport { ILineFromPlayer, IPlayerRole, IPlayerState } from \"../../interfaces/Interfaces\";\r\n\r\nconst Actions = {\r\n  setRoom: (room: string) => {\r\n    return {\r\n      type: ActionTypes.SET_ROOM,\r\n      payload: room\r\n    }\r\n  },\r\n\r\n  setName: (name: string) => {\r\n    return {\r\n      type: ActionTypes.SET_NAME,\r\n      payload: name\r\n    }\r\n  },\r\n\r\n  setPlayers: (names: string[]) => {\r\n    return {\r\n      type: ActionTypes.ADD_PLAYER,\r\n      payload: names\r\n    }\r\n  },\r\n\r\n  setPlayerColour: (playerName: string, colour: string) => {\r\n    return {\r\n      type: ActionTypes.SET_PLAYER_COLOUR,\r\n      payload: {\r\n        playerName: playerName,\r\n        colour: colour\r\n      }\r\n    }\r\n  },\r\n\r\n  setPossibleRoles: (roles: IPlayerRole[]) => {\r\n    return {\r\n      type: ActionTypes.SET_POSSIBLE_ROLES,\r\n      payload: roles\r\n    }\r\n  },\r\n\r\n  setRole: (role: string) => {\r\n    return {\r\n      type: ActionTypes.SET_ROLE,\r\n      payload: role\r\n    }\r\n  },\r\n\r\n  setPlaying: (playing: boolean) => {\r\n    return {\r\n      type: ActionTypes.SET_PLAYING,\r\n      payload: playing\r\n    }\r\n  },\r\n\r\n  setTime: (time: number) => {\r\n    return {\r\n      type: ActionTypes.SET_TIME,\r\n      payload: time\r\n    }\r\n  },\r\n\r\n  addLines: (lines: ILineFromPlayer[]) => {\r\n    return {\r\n      type: ActionTypes.ADD_LINES,\r\n      payload: lines\r\n    }\r\n  },\r\n\r\n  setActivePlayer: (currentPlayerPosition: number) => {\r\n    return {\r\n      type: ActionTypes.SET_ACTIVE_PLAYER,\r\n      payload: currentPlayerPosition\r\n    }\r\n  },\r\n\r\n  setGameWord: (word: string) => {\r\n    return {\r\n      type: ActionTypes.SET_GAME_WORD,\r\n      payload: word\r\n    }\r\n  },\r\n\r\n  startGuess: (player: string) => {\r\n    return {\r\n      type: ActionTypes.SET_GUESSING,\r\n      payload: {\r\n        playerName: player,\r\n        guessing: true\r\n      }\r\n    }\r\n  },\r\n\r\n  endGuess: () => {\r\n    return {\r\n      type: ActionTypes.SET_GUESSING,\r\n      payload: {\r\n        guessing: false\r\n      }\r\n    }\r\n  },\r\n\r\n  submitGuess: (correct: boolean) => {\r\n    return {\r\n      type: ActionTypes.SET_CORRECT_GUESS,\r\n      payload: correct\r\n    }\r\n  },\r\n\r\n  endGame: (spy: string) => {\r\n    return {\r\n      type: ActionTypes.END_GAME,\r\n      payload: spy\r\n    }\r\n  },\r\n\r\n  setState: (state: Partial<IPlayerState>) => {\r\n    return {\r\n      type: ActionTypes.SET_STATE,\r\n      payload: state\r\n    }\r\n  }\r\n}\r\n\r\nexport default Actions;\r\n","import { ILine, IPlayerRole, IServerMessage } from \"../interfaces/Interfaces\";\r\n\r\nconst url = window.location.protocol === \"https:\" ?\r\n\t\"wss://spydraw-server-5bao3jqrpa-ts.a.run.app\" :\r\n\t\"ws://localhost:8081\"\r\nconst socket = new WebSocket(url);\r\n\r\nexport async function parseTextResponse(response: Response): Promise<string> {\r\n\tif (response.body) {\r\n\t\tconst reader = response.body.getReader();\r\n\t\tconst result = await reader.read();\r\n\t\treturn new TextDecoder(\"utf-8\").decode(result.value)\r\n\t}\r\n\treturn \"\";\r\n}\r\n\r\nexport async function pingServer(): Promise<boolean> {\r\n\treturn new Promise<boolean>(resolve => {\r\n\t\tsocket.addEventListener(\"open\", () => {\r\n\t\t\tresolve(true);\r\n\t\t});\r\n\t}).catch(e => {\r\n\t\tconsole.error(e);\r\n\t\treturn false;\r\n\t});\r\n}\r\n\r\nexport function generateRoomCode(name: string) {\r\n\tconst content = { player: name };\r\n\tsocket.send(JSON.stringify({ type: \"NewRoom\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function submitRoomCode(code: string, player: string) {\r\n\tconst content = { code: code, player: player };\r\n\tsocket.send(JSON.stringify({ type: \"ConnectRoom\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function setPlayerColour(code: string, playerName: string, colour: string) {\r\n\tconst content = { code: code, name: playerName, colour: colour };\r\n\tsocket.send(JSON.stringify({ type: \"SetPlayerColour\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function startRoomGame(code: string) {\r\n\tconst content = { code: code };\r\n\tsocket.send(JSON.stringify({ type: \"StartGame\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function submitLines(code: string, player: string, lines: ILine[], strokeStyle: string, lineWidth: number) {\r\n\tconst content = { code: code, player: player, lines: lines, strokeStyle: strokeStyle, lineWidth: lineWidth };\r\n\tsocket.send(JSON.stringify({ type: \"Draw\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function getRole(code: string, player: string, possibleRoles: IPlayerRole[]) {\r\n\tconst content = { code: code, name: player, possibleRoles: possibleRoles };\r\n\tsocket.send(JSON.stringify({ type: \"GetRole\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function getGameWord(code: string, playerName: string) {\r\n\tconst content = { code: code, name: playerName };\r\n\tsocket.send(JSON.stringify({ type: \"GetWord\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function getFirstPlayer(code: string) {\r\n\tconst content = { code: code };\r\n\tsocket.send(JSON.stringify({ type: \"GetFirstPlayer\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function endTurn(code: string) {\r\n\tconst content = { code: code };\r\n\tsocket.send(JSON.stringify({ type: \"EndTurn\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function startGuess(code: string, playerName: string) {\r\n\tconst content = { code: code, name: playerName };\r\n\tsocket.send(JSON.stringify({ type: \"StartGuess\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function endGuess(code: string) {\r\n\tconst content = { code: code };\r\n\tsocket.send(JSON.stringify({ type: \"EndGuess\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function submitGuess(code: string, guessedName: string) {\r\n\tconst content = { code: code, guessedName: guessedName };\r\n\tsocket.send(JSON.stringify({ type: \"SubmitGuess\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function getState(code: string, playerName: string) {\r\n\tconst content = { code: code, name: playerName };\r\n\tsocket.send(JSON.stringify({ type: \"GetState\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function listenForMessage(callback: (data: IServerMessage) => void) {\r\n\tsocket.addEventListener(\"message\", event => {\r\n\t\tif (event.data) {\r\n\t\t\tcallback(JSON.parse(event.data));\r\n\t\t}\r\n\t});\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Actions from \"../../redux/actions/Actions\";\r\nimport { submitRoomCode, generateRoomCode } from \"../../utils/serverUtils\";\r\n\r\nconst ClassName = {\r\n  container: \"container-roomConnect\",\r\n}\r\n\r\nconst RoomConnect = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const [code, setCode] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const [nameError, setNameError] = useState(false);\r\n  const [roomCodeError, setRoomCodeError] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  // const iconPath = process.env.PUBLIC_URL + \"/assets/\";\r\n\r\n  return (\r\n    <div className={ClassName.container}>\r\n      <div>\r\n        <TextField\r\n          error={nameError}\r\n          value={name}\r\n          color=\"primary\"\r\n          placeholder=\"Enter player name\"\r\n          onChange={event => {\r\n            setName(event.target.value);\r\n            if (nameError) {\r\n              setNameError(false);\r\n            }\r\n          }}\r\n          fullWidth={true}\r\n          inputProps={{\r\n            style: { fontSize: \"calc(10px + 2vmin)\" }\r\n          }}\r\n        />\r\n      </div>\r\n      <p>\r\n        Connect to existing room\r\n      </p>\r\n      <div>\r\n        <TextField\r\n          error={roomCodeError}\r\n          value={code}\r\n          color=\"primary\"\r\n          placeholder=\"Enter room code\"\r\n          onChange={event => {\r\n            setCode(event.target.value);\r\n            if (roomCodeError) {\r\n              setRoomCodeError(false);\r\n            }\r\n          }}\r\n          fullWidth={true}\r\n          inputProps={{\r\n            style: { fontSize: \"calc(10px + 2vmin)\" }\r\n          }}\r\n        />\r\n      </div>\r\n      <div>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={() => {\r\n            if (!name) {\r\n              setNameError(true);\r\n            } else {\r\n              setNameError(false);\r\n            }\r\n            if (!code) {\r\n              setRoomCodeError(true);\r\n            } else {\r\n              setRoomCodeError(false);\r\n            }\r\n            if (name && code) {\r\n              dispatch(Actions.setPlayers([ name ]));\r\n              dispatch(Actions.setName(name));\r\n              dispatch(Actions.setRoom(code));\r\n              submitRoomCode(code, name);\r\n              history.push(\"/room\");\r\n            }\r\n          }}\r\n          fullWidth={true}\r\n          style={{ fontSize: \"calc(10px + 2vmin)\" }}\r\n        >\r\n          Submit\r\n        </Button>\r\n      </div>\r\n      <p>\r\n        Create new room\r\n      </p>\r\n      <div>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={ () => {\r\n            setRoomCodeError(false);\r\n            if (!name) {\r\n              setNameError(true);\r\n            } else {\r\n              setNameError(false);\r\n              generateRoomCode(name);\r\n              dispatch(Actions.setName(name));\r\n              history.push(\"/room\");\r\n            }\r\n          }}\r\n          fullWidth={true}\r\n          style={{ fontSize: \"calc(10px + 2vmin)\" }}\r\n        >\r\n          New Room\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RoomConnect;\r\n","import React from \"react\";\r\nimport RoomConnect from \"./RoomConnect\";\r\n\r\nconst Landing = () => {\r\n  console.log(\"Connected\");\r\n  return (\r\n    <>\r\n      <div className=\"Banner\">\r\n        <div className=\"PageTitle\">\r\n          Spy Draw\r\n        </div>\r\n      </div>\r\n      <RoomConnect />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Landing;\r\n","import React from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { IPlayerState } from \"../../interfaces/Interfaces\";\r\n\r\nconst ClassName = {\r\n  item: \"item-playerList\",\r\n  row: \"row-playerList\"\r\n}\r\n\r\nconst PlayerList = () => {\r\n  return (\r\n    <ReactReduxContext.Consumer>\r\n      {({ store }) => {\r\n        const state = store.getState();\r\n        return (\r\n          <>\r\n            <div className={ClassName.row}>\r\n              <div>\r\n                {\r\n                  state.name\r\n                }\r\n              </div>\r\n              {\r\n                !!state.playerColourMap[state.name] &&\r\n                  <div\r\n                    className={ClassName.item}\r\n                    style={{ background: state.playerColourMap[state.name] }}\r\n                  />\r\n              }\r\n            </div>\r\n            <div>\r\n              {\r\n                state.players.map((name: string, index: number) => {\r\n                  if (state.name !== name) {\r\n                    return (\r\n                      <>\r\n                        <div className={ClassName.row} key={ index }>\r\n                          <p>{ name }</p>\r\n                          {\r\n                            !!state.playerColourMap[name] &&\r\n                              <div\r\n                                className={ClassName.item}\r\n                                style={{ background: state.playerColourMap[name] }}\r\n                              />\r\n                          }\r\n                        </div>\r\n                      </>\r\n                    );\r\n                  }\r\n                })\r\n              }\r\n            </div>\r\n          </>\r\n        )\r\n      }}\r\n    </ReactReduxContext.Consumer>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: IPlayerState) => {\r\n  return {\r\n    players: state.players,\r\n    playerColourMap: state.playerColourMap\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PlayerList);\r\n","import React from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { setPlayerColour } from \"../../utils/serverUtils\";\r\nimport { IPlayerColourMap, IPlayerState } from \"../../interfaces/Interfaces\";\r\n\r\nconst ClassName = {\r\n  container: \"container-colourPicker\",\r\n  item: \"item-colourPicker\",\r\n  palette: \"palette-colourPicker\",\r\n}\r\n\r\nconst colours = [\r\n  \"green\",\r\n  \"blue\",\r\n  \"red\",\r\n  \"yellow\",\r\n  \"orange\",\r\n  \"black\",\r\n]\r\n\r\nconst ColourPicker = () => {\r\n\r\n  const setColour = (roomCode: string, playerName: string, obj: HTMLDivElement) => {\r\n\t\tsetPlayerColour(roomCode, playerName, obj.id);\r\n\t}\r\n\r\n  const isColourAvailable = (colour: string, playerColourMap: IPlayerColourMap): boolean => {\r\n    for (const player in playerColourMap) {\r\n      if (playerColourMap[player] === colour) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  return (\r\n    <ReactReduxContext.Consumer>\r\n      {({ store }) => {\r\n        const state = store.getState();\r\n        return (\r\n        \t<div className={ClassName.container}>\r\n        \t\t\t<div>Choose Color</div>\r\n              <div className={ClassName.palette}>\r\n                {\r\n                  colours.map((colour, index) => {\r\n                    return isColourAvailable(colour, state.playerColourMap) &&\r\n              \t\t\t   <div\r\n                        onClick={ e => setColour(state.room, state.name, e.target as HTMLDivElement) }\r\n                        style={{ background: colour }}\r\n                        id={colour}\r\n                        key={index}\r\n                        className={ClassName.item}\r\n                      >\r\n                      </div>\r\n                  })\r\n                }\r\n              </div>\r\n        \t</div>\r\n      \t);\r\n      }}\r\n    </ReactReduxContext.Consumer>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: IPlayerState) => {\r\n  return {\r\n    room: state.room,\r\n    name: state.name,\r\n    players: state.players,\r\n    playerColourMap: state.playerColourMap,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ColourPicker);\r\n","import React from \"react\";\r\nimport { ReactReduxContext, connect } from \"react-redux\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PlayerList from \"./PlayerList\";\r\nimport ColourPicker from \"./ColourPicker\";\r\nimport { startRoomGame } from \"../../utils/serverUtils\";\r\nimport { IPlayerState } from \"../../interfaces/Interfaces\";\r\n\r\nconst ClassName = {\r\n  container: \"container-room\",\r\n}\r\n\r\nfunction Room() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <ReactReduxContext.Consumer>\r\n      {({ store }) => {\r\n        const state = store.getState();\r\n        if (location.pathname !== \"game\" && state.playing) {\r\n          history.push(\"/game\");\r\n        }\r\n        return (\r\n          <div className={ClassName.container}>\r\n            <p>\r\n              Room: { state.room }\r\n            </p>\r\n            <PlayerList />\r\n            <ColourPicker />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                startRoomGame(state.room);\r\n              }}\r\n              fullWidth={true}\r\n              style={{ fontSize: \"calc(10px + 2vmin)\" }}\r\n            >\r\n              Start game\r\n            </Button>\r\n          </div>\r\n        );\r\n      }}\r\n    </ReactReduxContext.Consumer>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: IPlayerState) => {\r\n  return {\r\n    room: state.room,\r\n    playing: state.playing\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Room);\r\n","import React from \"react\";\r\n\r\ninterface IProps {\r\n  setStrokeStyle: (id: string) => void;\r\n  setLineWidth: (width: number) => void;\r\n}\r\n\r\nfunction Palette(props: IProps) {\r\n\r\n\tconst setColor = (obj: HTMLDivElement) => {\r\n\t\tprops.setStrokeStyle(obj.id);\r\n\t\tif (obj.id === \"white\") {\r\n\t\t\tprops.setLineWidth(14);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tprops.setLineWidth(2);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n  \t<>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) }>Choose Color</div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"green\" }} id=\"green\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"blue\" }} id=\"blue\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"red\" }} id=\"red\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"yellow\" }} id=\"yellow\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"orange\" }} id=\"orange\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"black\" }} id=\"black\"></div>\r\n  \t</>\r\n\t);\r\n}\r\n\r\nexport default Palette;\r\n","import React, { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { IPlayerColourMap, IPlayerState, ILine, ILineFromPlayer, ILineWithStyle } from \"../../interfaces/Interfaces\";\r\nimport { submitLines } from \"../../utils/serverUtils\";\r\nimport Palette from \"./Palette\";\r\n\r\ninterface IProps {\r\n  canDraw: boolean;\r\n  showPalette: boolean;\r\n  onEndStroke: () => void;\r\n}\r\n\r\nfunction Canvas(props: IProps) {\r\n\tconst lines = useSelector<IPlayerState>(state => state.canvasLines) as ILineFromPlayer[];\r\n\tconst roomCode = useSelector<IPlayerState>(state => state.room) as string;\r\n\tconst playerName = useSelector<IPlayerState>(state => state.name) as string;\r\n  const playerColourMap = useSelector<IPlayerState>(state => state.playerColourMap) as IPlayerColourMap;\r\n\tuseSelector<IPlayerState>(state => state.role) as string;\r\n\r\n\tlet strokeStyle = \"black\";\r\n\tlet lineWidth = 2;\r\n\tconst line: ILine = {\r\n\t\tstartX: 0,\r\n\t\tstartY: 0,\r\n\t\tendX: 0,\r\n\t\tendY: 0\r\n\t}\r\n\tlet linesToSend: ILine[] = [];\r\n\tlet alreadySent = false; // If mouseUp, send straight away so this prevents the timer sending\r\n\tlet dotFlag = false;\r\n  let pressedFlag = false;\r\n\r\n\tlet canvas: HTMLCanvasElement;\r\n\tlet ctx: CanvasRenderingContext2D;\r\n\r\n\tuseEffect(() => {\r\n    canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\r\n\t\tif (canvas && props.canDraw) {\r\n      setCanvas();\r\n\t\t\tcanvas.addEventListener(\"mousemove\", handleMouseMove);\r\n\t\t\tcanvas.addEventListener(\"mousedown\", handleMouseDown);\r\n\t\t\tcanvas.addEventListener(\"mouseup\", handleMouseUp);\r\n\t\t\tcanvas.addEventListener(\"mouseout\", handleMouseOut);\r\n      canvas.addEventListener(\"touchmove\", handleMouseMove);\r\n\t\t\tcanvas.addEventListener(\"touchstart\", handleMouseDown);\r\n\t\t\tcanvas.addEventListener(\"touchend\", handleMouseUp);\r\n\t\t\tcanvas.addEventListener(\"touchcancel\", handleMouseOut);\r\n\t\t}\r\n    addLinesFromServer();\r\n    return function cleanup() {\r\n      canvas.removeEventListener(\"mousemove\", handleMouseMove);\r\n      canvas.removeEventListener(\"mousedown\", handleMouseDown);\r\n      canvas.removeEventListener(\"mouseup\", handleMouseUp);\r\n      canvas.removeEventListener(\"mouseout\", handleMouseOut);\r\n      canvas.removeEventListener(\"touchmove\", handleMouseMove);\r\n\t\t\tcanvas.removeEventListener(\"touchstart\", handleMouseDown);\r\n\t\t\tcanvas.removeEventListener(\"touchend\", handleMouseUp);\r\n\t\t\tcanvas.removeEventListener(\"touchcancel\", handleMouseOut);\r\n    }\r\n  }, [props.canDraw]);\r\n\r\n  const handleMouseDown = (e: Event) => {\r\n    pressedFlag = true;\r\n    alreadySent = false;\r\n    setTimeout(() => {\r\n      if (!alreadySent) {\r\n        const adjustedLines = resizeLinesForServer(linesToSend);\r\n        submitLines(roomCode, playerName, adjustedLines, strokeStyle, lineWidth);\r\n        linesToSend = [];\r\n      }\r\n    }, 1000);\r\n    line.startX = line.endX;\r\n    line.startY = line.endY;\r\n    if ((e as MouseEvent).clientX) {\r\n      line.endX = (e as MouseEvent).clientX - canvas.offsetLeft;\r\n      line.endY = (e as MouseEvent).clientY - canvas.offsetTop;\r\n    } else if ((e as TouchEvent).touches) {\r\n      line.endX = (e as TouchEvent).touches[0].clientX - canvas.offsetLeft;\r\n      line.endY = (e as TouchEvent).touches[0].clientY - canvas.offsetTop;\r\n    }\r\n\r\n    dotFlag = true;\r\n    // TODO: send this drawing to server\r\n    if (dotFlag) {\r\n      ctx.beginPath();\r\n      ctx.fillStyle = strokeStyle;\r\n      ctx.fillRect(line.endX, line.endY, 2, 2);\r\n      ctx.closePath();\r\n      dotFlag = false;\r\n    }\r\n  }\r\n\r\n  const handleMouseMove = (e: Event) => {\r\n    e.preventDefault();\r\n    if (pressedFlag) {\r\n      line.startX = line.endX;\r\n      line.startY = line.endY;\r\n      if ((e as MouseEvent).clientX) {\r\n        line.endX = (e as MouseEvent).clientX - canvas.offsetLeft;\r\n        line.endY = (e as MouseEvent).clientY - canvas.offsetTop;\r\n      } else if ((e as TouchEvent).touches) {\r\n        line.endX = (e as TouchEvent).touches[0].clientX - canvas.offsetLeft;\r\n        line.endY = (e as TouchEvent).touches[0].clientY - canvas.offsetTop;\r\n      }\r\n      linesToSend.push(Object.assign({}, line));\r\n      draw(line);\r\n    }\r\n  }\r\n\r\n  const handleMouseUp = () => {\r\n    if (pressedFlag && !alreadySent) {\r\n      const adjustedLines = resizeLinesForServer(linesToSend);\r\n      submitLines(roomCode, playerName, adjustedLines, strokeStyle, lineWidth);\r\n      linesToSend = [];\r\n      props.onEndStroke();\r\n    }\r\n    pressedFlag = false;\r\n  }\r\n\r\n  const handleMouseOut = () => {\r\n    handleMouseUp();\r\n  }\r\n\r\n\tconst draw = (line: ILine | ILineFromPlayer | ILineWithStyle) => {\r\n\t\tsetCanvas();\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(line.startX, line.startY);\r\n\t\tctx.lineTo(line.endX, line.endY);\r\n    if (\"playerName\" in line) {\r\n\t\t\tctx.strokeStyle = playerColourMap[line.playerName];\r\n    } else if (playerColourMap[playerName]) {\r\n\t\t\tctx.strokeStyle = playerColourMap[playerName];\r\n\t\t} else if (\"strokeStyle\" in line) {\r\n\t\t\tctx.strokeStyle = line.strokeStyle;\r\n\t\t} else {\r\n\t\t\tctx.strokeStyle = strokeStyle;\r\n\t\t}\r\n\t\tif (\"lineWidth\" in line) {\r\n\t\t\tctx.lineWidth = line.lineWidth;\r\n\t\t} else {\r\n\t\t\tctx.lineWidth = lineWidth;\r\n\t\t}\r\n\t\tctx.stroke();\r\n\t\tctx.closePath();\r\n\t}\r\n\r\n\tconst addLinesFromServer = () => {\r\n    const adjustedLines = resizeLinesForCanvas(lines);\r\n\t\tfor (const line of adjustedLines) {\r\n\t\t\tdraw(line);\r\n\t\t}\r\n\t}\r\n\r\n\tconst setCanvas = () => {\r\n\t\tif (!ctx) {\r\n\t\t\tif (!canvas) {\r\n\t\t\t\tcanvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\r\n\t\t\t}\r\n\t\t\tctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n\t\t}\r\n\t}\r\n\r\n  const setStrokeStyle = (id: string) => {\r\n    strokeStyle = id;\r\n  }\r\n\r\n  const setLineWidth = (width: number) => {\r\n    lineWidth = width;\r\n  }\r\n\r\n  let canvasWidth = 0.8 * window.innerWidth;\r\n  let canvasHeight = canvasWidth;\r\n  if (canvasHeight > window.innerHeight) {\r\n    canvasWidth = 0.6 * window.innerHeight;\r\n    canvasHeight = canvasWidth;\r\n  }\r\n\r\n  const resizeLinesForCanvas = (lines: ILineFromPlayer[]): ILineFromPlayer[] => {\r\n    const adjustedLines: ILineFromPlayer[] = [];\r\n    for (const line of lines) {\r\n      adjustedLines.push({\r\n        startX: line.startX * canvasWidth,\r\n        endX: line.endX * canvasWidth,\r\n        startY: line.startY * canvasHeight,\r\n        endY: line.endY * canvasHeight,\r\n        playerName: line.playerName,\r\n      });\r\n    }\r\n    return adjustedLines;\r\n  }\r\n\r\n  const resizeLinesForServer = (lines: ILine[]): ILine[] => {\r\n    const adjustedLines = [];\r\n    for (const line of lines) {\r\n      adjustedLines.push({\r\n        startX: line.startX / canvasWidth,\r\n        endX: line.endX / canvasWidth,\r\n        startY: line.startY / canvasHeight,\r\n        endY: line.endY / canvasHeight,\r\n      });\r\n    }\r\n    return adjustedLines;\r\n  }\r\n\r\n  window.onresize = () => {\r\n    // TODO: re-render to adjust canvas size\r\n  }\r\n\r\n\treturn (\r\n  \t<>\r\n  \t\t\t<canvas\r\n          id=\"canvas\"\r\n          width={canvasWidth}\r\n          height={canvasHeight}\r\n          style={{\r\n            border: \"2px solid\"\r\n          }}\r\n        />\r\n        {\r\n          props.showPalette &&\r\n    \t\t\t<Palette\r\n            setStrokeStyle={id => setStrokeStyle(id)}\r\n            setLineWidth={width => setLineWidth(width)}\r\n          />\r\n        }\r\n  \t\t\t<img id=\"canvasimg\" style={{ position: \"absolute\", top: \"10%\", left: \"52%\" }} />\r\n  \t</>\r\n\t);\r\n}\r\n\r\nexport default Canvas;\r\n","import React from \"react\";\r\nimport \"../../styles/styles.css\"\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport { submitGuess } from \"../../utils/serverUtils\";\r\nimport { IPlayerColourMap } from \"../../interfaces/Interfaces\";\r\n\r\ninterface IProps {\r\n  name: string;\r\n  room: string;\r\n  playerNames: string[];\r\n  open: boolean;\r\n  onClose: () => void;\r\n  guessingPlayer: string;\r\n  playerColourMap: IPlayerColourMap;\r\n}\r\n\r\nconst ClassName = {\r\n  container: \"modal-body\"\r\n}\r\n\r\nfunction GuessSpyPanel(props: IProps) {\r\n  const onSubmit = (name: string) => {\r\n    submitGuess(props.room, name);\r\n    props.onClose();\r\n  }\r\n\r\n\treturn (\r\n    <Modal\r\n      open={props.open}\r\n      onClose={props.onClose}\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n    >\r\n      {\r\n        <div className={ClassName.container}>\r\n          {\r\n            props.guessingPlayer === props.name ?\r\n              props.playerNames.map((name, index) => {\r\n                if (name !== props.name) {\r\n                  return <Button\r\n                    variant=\"contained\"\r\n                    onClick={() => onSubmit(name)}\r\n                    key={index}\r\n                    style={{\r\n                      backgroundColor: props.playerColourMap ? props.playerColourMap[name] : \"black\",\r\n                      color: \"#fff\"\r\n                    }}\r\n                  >\r\n                    {name}\r\n                  </Button>\r\n                }\r\n              })\r\n            :\r\n              <div>{props.guessingPlayer} is guessing!</div>\r\n          }\r\n        </div>\r\n      }\r\n    </Modal>\r\n\t);\r\n}\r\n\r\nexport default GuessSpyPanel;\r\n","import React from \"react\";\r\nimport \"../../styles/styles.css\"\r\nimport Button from \"@material-ui/core/Button\";\r\nimport GuessSpyPanel from \"./GuessSpyPanel\";\r\nimport { endGuess, startGuess } from \"../../utils/serverUtils\";\r\nimport { IPlayerColourMap } from \"../../interfaces/Interfaces\";\r\n\r\ninterface IProps {\r\n\troom: string;\r\n\tname: string;\r\n\trole: string;\r\n\tplayerNames: string[];\r\n\tguessingPlayer: string;\r\n\tplayerColourMap: IPlayerColourMap\r\n\tword?: string;\r\n}\r\n\r\nconst ClassName = \"container-infoPanel\";\r\n\r\nfunction InfoPanel(props: IProps) {\r\n\tconst onGuessPressed = () => {\r\n\t\tstartGuess(props.room, props.name);\r\n\t}\r\n\r\n\tconst onClose = () => {\r\n\t\tendGuess(props.room);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={ClassName}>\r\n\t\t\t<div>Room: {props.room}</div>\r\n\t\t\t<div>Role: {props.role}</div>\r\n\t\t\t{\r\n\t\t\t\t!!props.word &&\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div>Word: {props.word}</div>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => onGuessPressed()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tGuess the spy\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t<GuessSpyPanel\r\n\t\t\t\tkey={props.guessingPlayer}\r\n\t\t\t\tname={props.name}\r\n\t\t\t\troom={props.room}\r\n\t\t\t\tplayerNames={props.playerNames}\r\n\t\t\t\topen={!!props.guessingPlayer}\r\n\t\t\t\tonClose={() => onClose()}\r\n\t\t\t\tguessingPlayer={props.guessingPlayer}\r\n\t\t\t\tplayerColourMap={props.playerColourMap}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default InfoPanel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"../../styles/styles.css\"\r\n\r\ninterface IProps {\r\n\tstartingSeconds: number,\r\n  gameEnded: boolean,\r\n}\r\n\r\nconst ClassName = \"container-infoPanel\";\r\n\r\nfunction Timer(props: IProps) {\r\n  const [ timerSeconds, setTimerSeconds ] = useState<number>(props.startingSeconds);\r\n\r\n  useEffect(() => {\r\n    if (timerSeconds > 0 && !props.gameEnded) {\r\n      setTimeout(() => {\r\n        setTimerSeconds(timerSeconds - 1);\r\n      }, 1000);\r\n    }\r\n  });\r\n\r\n  const convertSecondsToTimer = (seconds: number): string => {\r\n    const minutes = Math.floor(seconds / 60);\r\n    const remainingSeconds = seconds - minutes * 60;\r\n    const minutesDisplay = minutes < 10 ? `0${minutes}` : `${minutes}`;\r\n    const secondsDisplay = remainingSeconds < 10 ? `0${remainingSeconds}` : `${remainingSeconds}`;\r\n    return `${minutesDisplay}:${secondsDisplay}`;\r\n  }\r\n\r\n\treturn (\r\n\t\t<div className={ClassName}>\r\n      <span id=\"time\">{ convertSecondsToTimer(timerSeconds) }</span>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Timer;\r\n","import React from \"react\";\r\nimport \"../../styles/styles.css\"\r\n\r\ninterface IProps {\r\n  guessedSpy: boolean;\r\n  spy: string;\r\n  playerName: string;\r\n}\r\n\r\nconst ClassName = \"container-gameEnd\";\r\n\r\nfunction GameEnd(props: IProps) {\r\n  const renderGameEnd = (): JSX.Element => {\r\n    if (props.guessedSpy && props.spy === props.playerName) {\r\n      return <div>Guess the word!</div>\r\n    } else if (props.guessedSpy) {\r\n      return <div>{props.spy}, guess the word!</div>\r\n    } else if (props.spy === props.playerName) {\r\n      return <div>{props.spy} wins!</div>\r\n    }\r\n    return <div>You win!</div>\r\n  }\r\n\r\n\treturn (\r\n\t\t<div className={ClassName}>\r\n      { renderGameEnd() }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default GameEnd;\r\n","import React, { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { IPlayerColourMap, IPlayerRole, IPlayerState } from \"../../interfaces/Interfaces\";\r\nimport { endTurn, getFirstPlayer, getGameWord, getRole, getState } from \"../../utils/serverUtils\";\r\nimport Actions from \"../../redux/actions/Actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Canvas from \"../canvas/Canvas\";\r\nimport InfoPanel from \"./InfoPanel\";\r\nimport Timer from \"./Timer\";\r\nimport GameEnd from \"./GameEnd\";\r\nimport * as SessionStorageUtils from \"../../utils/sessionStorageUtils\";\r\n\r\nconst DEFAULT_ROLE = \"Friend\";\r\n\r\nconst EXTRA_ROLES: IPlayerRole[] = [\r\n  {\r\n    roleName: \"Spy\",\r\n    roleCount: 1\r\n  }\r\n]\r\n\r\ninterface IGameState {\r\n  time: number,\r\n  roomCode: string,\r\n  word: string,\r\n  playerName: string,\r\n  possibleRoles: IPlayerRole[],\r\n  players: string[],\r\n  activePlayer: string,\r\n  guessingPlayer: string,\r\n  role: string,\r\n  playerColourMap: IPlayerColourMap,\r\n  gameEnded: boolean,\r\n  guessedSpy: boolean,\r\n  spy: string,\r\n  playing: boolean,\r\n}\r\n\r\nfunction Game() {\r\n\tconst dispatch = useDispatch();\r\n\r\n  const gameState = useSelector<IPlayerState>(state => (\r\n    {\r\n      time: state.time,\r\n      roomCode: state.room,\r\n      word: state.gameWord,\r\n      playerName: state.name,\r\n      possibleRoles: state.possibleRoles,\r\n      players: state.players,\r\n      activePlayer: state.activePlayer,\r\n      guessingPlayer: state.guessingPlayer,\r\n      role: state.role,\r\n      gameEnded: state.gameEnded,\r\n      guessedSpy: state.guessedSpy,\r\n      spy: state.spy,\r\n      playing: state.playing,\r\n    }\r\n  )) as IGameState;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (gameState.possibleRoles.length === 0) {\r\n      if (gameState.playerName && gameState.roomCode) {\r\n        SessionStorageUtils.setPlayerInfo({\r\n          name: gameState.playerName,\r\n          room: gameState.roomCode\r\n        })\r\n      }\r\n\t\t\tconst playerCount = Object.keys(gameState.players).length;\r\n\t\t\tlet totalExtraRoles = 0;\r\n\t\t\tfor (const role of EXTRA_ROLES) {\r\n\t\t\t\ttotalExtraRoles += role.roleCount;\r\n\t\t\t}\r\n\t\t\tconst defaultRole: IPlayerRole = {\r\n\t\t\t\troleName: DEFAULT_ROLE,\r\n\t\t\t\troleCount: playerCount - totalExtraRoles\r\n\t\t\t}\r\n\t\t\tconst allRoles = EXTRA_ROLES.concat(defaultRole);\r\n\t\t\tdispatch(Actions.setPossibleRoles(allRoles));\r\n      if (gameState.playing) {\r\n  \t\t\tgetRole(gameState.roomCode, gameState.playerName, allRoles);\r\n  \t\t\tgetGameWord(gameState.roomCode, gameState.playerName);\r\n        getFirstPlayer(gameState.roomCode);\r\n      } else {\r\n        const info = SessionStorageUtils.getPlayerInfo();\r\n        getState(info.room, info.name);\r\n        dispatch(Actions.setPlaying(true));\r\n      }\r\n\t\t}\r\n  });\r\n\r\n  const isActivePlayer = () => {\r\n    return gameState.playerName === gameState.activePlayer;\r\n  }\r\n\r\n\tconst onEndStroke = () => {\r\n\t\tendTurn(gameState.roomCode);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n      <Timer\r\n        startingSeconds={gameState.time}\r\n        gameEnded={gameState.gameEnded}\r\n      />\r\n      {\r\n        !gameState.gameEnded ?\r\n          <>\r\n            {\r\n              isActivePlayer() ?\r\n                <p>\r\n                  Your turn!\r\n                </p>\r\n              :\r\n                <p>\r\n                  {gameState.activePlayer}'s turn'!\r\n                </p>\r\n            }\r\n      \t\t\t{\r\n      \t\t\t\t!!gameState.role ?\r\n      \t\t\t\t\t<>\r\n      \t\t\t\t\t\t<InfoPanel\r\n      \t\t\t\t\t\t\troom={gameState.roomCode}\r\n                    name={gameState.playerName}\r\n      \t\t\t\t\t\t\trole={gameState.role}\r\n      \t\t\t\t\t\t\tword={gameState.word}\r\n                    playerNames={gameState.players}\r\n                    guessingPlayer={gameState.guessingPlayer}\r\n                    playerColourMap={gameState.playerColourMap}\r\n      \t\t\t\t\t\t/>\r\n      \t\t\t\t\t\t<Canvas\r\n                    canDraw={isActivePlayer()}\r\n                    showPalette={false}\r\n      \t\t\t\t\t\t\tonEndStroke={() => onEndStroke()}\r\n                  />\r\n      \t\t\t\t\t</>\r\n      \t\t\t\t:\r\n      \t\t\t\t\t<div>\r\n      \t\t\t\t\t\tAssigning roles...\r\n      \t\t\t\t\t</div>\r\n      \t\t\t}\r\n          </>\r\n        :\r\n          <>\r\n            <GameEnd\r\n              guessedSpy={gameState.guessedSpy}\r\n              spy={gameState.spy}\r\n              playerName={gameState.playerName}\r\n            />\r\n          </>\r\n      }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Game;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Landing from \"./components/landing/Landing\";\r\nimport Room from \"./components/room/Room\";\r\nimport Game from \"./components/game/Game\";\r\nimport Actions from \"./redux/actions/Actions\";\r\nimport \"./App.css\";\r\nimport { IServerMessage, ILine, ILineFromPlayer } from \"./interfaces/Interfaces\";\r\nimport { listenForMessage, pingServer } from \"./utils/serverUtils\";\r\n\r\nenum ConnectState {\r\n  LOADING,\r\n  CONNECTED,\r\n  FAILED\r\n}\r\n\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n  const [ connected, setConnected ] = useState<ConnectState>(ConnectState.LOADING);\r\n\r\n  useEffect(() => {\r\n    const attemptConnection = async () => {\r\n      let success = false;\r\n      try {\r\n        success = await pingServer();\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n      if (success) {\r\n        listenForMessage(handleServerMessage);\r\n        if (connected !== ConnectState.CONNECTED) {\r\n          setConnected(ConnectState.CONNECTED);\r\n        }\r\n      } else {\r\n        if (connected !== ConnectState.FAILED) {\r\n          setConnected(ConnectState.FAILED);\r\n        }\r\n      }\r\n    }\r\n    attemptConnection();\r\n  }, []);\r\n\r\n  const handleServerMessage = (message: IServerMessage) => {\r\n    switch (message.type) {\r\n      case \"NewRoom\":\r\n        let code: string;\r\n        if (!message.content || !message.content.code) {\r\n          code = \"ERROR\"\r\n        } else {\r\n          code = message.content.code;\r\n        }\r\n        dispatch(Actions.setRoom(code));\r\n        break;\r\n      case \"ConnectRoom\":\r\n        dispatch(Actions.setPlayers(message.content.players));\r\n        break;\r\n      case \"SetPlayerColour\":\r\n        dispatch(Actions.setPlayerColour(message.content.name, message.content.colour));\r\n        break;\r\n      case \"StartGame\":\r\n        dispatch(Actions.setTime(message.content.time));\r\n        dispatch(Actions.setPlaying(true));\r\n        break;\r\n      case \"GetRole\":\r\n        dispatch(Actions.setRole(message.content.role));\r\n        break;\r\n      case \"GetWord\":\r\n        dispatch(Actions.setGameWord(message.content.word));\r\n        break;\r\n      case \"Draw\":\r\n        const linesFromPlayer: ILineFromPlayer[] = [];\r\n        for (const line of message.content.lines as ILine[]) {\r\n          linesFromPlayer.push({\r\n            startX: line.startX,\r\n            startY: line.startY,\r\n            endX: line.endX,\r\n            endY: line.endY,\r\n            playerName: message.content.name as string,\r\n          })\r\n        }\r\n        dispatch(Actions.addLines(linesFromPlayer));\r\n        break;\r\n      case \"EndTurn\":\r\n      case \"GetFirstPlayer\":\r\n        dispatch(Actions.setActivePlayer(message.content.activePlayer));\r\n        break;\r\n      case \"StartGuess\":\r\n        dispatch(Actions.startGuess(message.content.name));\r\n        break;\r\n      case \"EndGuess\":\r\n        dispatch(Actions.endGuess());\r\n        break;\r\n      case \"SubmitGuess\":\r\n        dispatch(Actions.submitGuess(message.content.correct));\r\n        break;\r\n      case \"EndGame\":\r\n        dispatch(Actions.endGame(message.content.spy));\r\n        break;\r\n      case \"GetState\":\r\n        dispatch(Actions.setState(message.content.state));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  if (connected === ConnectState.FAILED) {\r\n    return (\r\n      <div className=\"App\">\r\n        <p>Failed to connect to server</p>\r\n      </div>\r\n    )\r\n  } else {\r\n    return (\r\n      <div className=\"App\">\r\n        <Router>\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <Landing />\r\n            </Route>\r\n            <Route exact path=\"/room\">\r\n              <Room />\r\n            </Route>\r\n            <Route exact path=\"/game\">\r\n              <Game />\r\n            </Route>\r\n          </Switch>\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","export interface IPlayerSessionInfo {\r\n  name: string;\r\n  room: string;\r\n}\r\n\r\nexport const SessionStorageKey = \"spydraw_\";\r\n\r\nexport function setPlayerInfo(info: IPlayerSessionInfo): void {\r\n\tsessionStorage.setItem(SessionStorageKey + \"player\", JSON.stringify(info));\r\n}\r\n\r\nexport function getPlayerInfo(): IPlayerSessionInfo {\r\n  return JSON.parse((sessionStorage.getItem(SessionStorageKey + \"player\") as string)) as IPlayerSessionInfo;\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: any) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won\"t work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl: string = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let\"s check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config: any) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It\"s the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config: any) {\r\n  // Check if the service worker can be found. If it can\"t reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import * as Interfaces from \"../../interfaces/Interfaces\";\r\nimport * as ActionTypes from \"../actions/ActionTypes\";\r\n\r\ntype IReducerFunction = (\r\n  state: Interfaces.IPlayerState | undefined,\r\n  action: any\r\n) => Interfaces.IPlayerState;\r\n\r\nconst initialState: Interfaces.IPlayerState = {\r\n  room: \"\",\r\n  name: \"\",\r\n  players: [],\r\n  playerColourMap: {},\r\n  activePlayer: \"\",\r\n  canvasLines: [],\r\n  playing: false,\r\n  role: \"\",\r\n  possibleRoles: [],\r\n  gameWord: \"\",\r\n  guessingPlayer: \"\",\r\n  time: -1,\r\n  guessedSpy: false,\r\n  gameEnded: false,\r\n  spy: \"\",\r\n};\r\n\r\nconst RootReducer: IReducerFunction = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ActionTypes.SET_ROOM:\r\n      const room = action.payload as string;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\troom: room\r\n\t\t\t};\r\n    case ActionTypes.SET_NAME:\r\n      const name = action.payload as string;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\t\tcase ActionTypes.ADD_PLAYER:\r\n\t\t\tconst names = action.payload as string[];\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\tplayers: names\r\n\t\t\t};\r\n    case ActionTypes.SET_PLAYER_COLOUR:\r\n\t\t\tconst playerName = (action.payload as Interfaces.IPlayerColourAction).playerName;\r\n      const colour = (action.payload as Interfaces.IPlayerColourAction).colour;\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\tplayerColourMap: {\r\n          ...state.playerColourMap,\r\n          [playerName]: colour\r\n        }\r\n\t\t\t};\r\n    case ActionTypes.SET_POSSIBLE_ROLES:\r\n\t\t\tconst roles = action.payload as Interfaces.IPlayerRole[];\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\tpossibleRoles: roles\r\n\t\t\t};\r\n    case ActionTypes.SET_ROLE:\r\n\t\t\tconst role = action.payload as string;\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\trole: role\r\n\t\t\t};\r\n\t\tcase ActionTypes.SET_PLAYING:\r\n\t\t\tconst playing = action.payload as boolean;\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\tplaying: playing\r\n\t\t\t};\r\n    case ActionTypes.SET_TIME:\r\n      const time = action.payload as number;\r\n      return {\r\n        ...state,\r\n        time: time\r\n      }\r\n    case ActionTypes.ADD_LINES:\r\n      const lines = action.payload as Interfaces.ILineFromPlayer[];\r\n      return {\r\n        ...state,\r\n        canvasLines: [ ...state.canvasLines, ...lines ]\r\n      }\r\n    case ActionTypes.SET_ACTIVE_PLAYER:\r\n      const activePlayer = action.payload as string;\r\n      return {\r\n        ...state,\r\n        activePlayer: activePlayer\r\n      }\r\n    case ActionTypes.SET_GAME_WORD:\r\n      const word = action.payload as string;\r\n      return {\r\n        ...state,\r\n        gameWord: word\r\n      }\r\n    case ActionTypes.SET_GUESSING:\r\n      const guessingPlayer = (action.payload as Interfaces.ISetGuessingAction).playerName;\r\n      const isGuessing = (action.payload as Interfaces.ISetGuessingAction).guessing;\r\n      return {\r\n        ...state,\r\n        guessingPlayer: isGuessing ? guessingPlayer : \"\"\r\n      }\r\n    case ActionTypes.SET_CORRECT_GUESS:\r\n      const guessedSpy = action.payload as boolean;\r\n      return {\r\n        ...state,\r\n        guessedSpy: guessedSpy\r\n      }\r\n    case ActionTypes.END_GAME:\r\n      const spy = action.payload as string;\r\n      return {\r\n        ...state,\r\n        gameEnded: true,\r\n        spy: spy\r\n      }\r\n    case ActionTypes.SET_STATE:\r\n      const partialState = action.payload as Partial<Interfaces.IPlayerState>;\r\n      return {\r\n        ...state,\r\n        ...partialState\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default RootReducer;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { createPlayerStore } from \"./redux/datastore/StoreManager\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nconst store = createPlayerStore();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={ store }>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import { createStore } from \"redux\";\r\nimport RootReducer from \"../reducers/RootReducer\";\r\n\r\nexport const createPlayerStore = () => {\r\n  return createStore(RootReducer, (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__());\r\n}\r\n"],"sourceRoot":""}