{"version":3,"sources":["redux/actions/ActionTypes.ts","redux/actions/Actions.ts","utils/serverUtils.ts","components/landing/InvalidRoomModal.tsx","components/landing/RoomConnect.tsx","components/landing/Landing.tsx","components/room/PlayerList.tsx","components/room/ColourPicker.tsx","utils/sessionStorageUtils.ts","components/room/Room.tsx","components/canvas/Palette.tsx","components/canvas/Canvas.tsx","components/game/GuessSpyPanel.tsx","components/game/InfoPanel.tsx","components/game/Timer.tsx","components/game/GameEnd.tsx","components/game/Game.tsx","App.tsx","serviceWorker.ts","redux/reducers/RootReducer.ts","index.tsx","redux/datastore/StoreManager.ts"],"names":["SET_ROOM","SET_NAME","ADD_PLAYER","SET_INVALID_ROOM","SET_PLAYER_COLOUR","SET_POSSIBLE_ROLES","SET_ROLE","ADD_LINES","SET_PLAYING","SET_TIME","SET_ACTIVE_PLAYER","SET_GAME_WORD","SET_GUESSING","SET_CORRECT_GUESS","END_GAME","SET_STATE","Actions","setRoom","room","type","ActionTypes","payload","setName","name","setPlayers","names","setInvalidRoomCode","invalid","setPlayerColour","playerName","colour","setPossibleRoles","roles","setRole","role","setPlaying","playing","setTime","time","addLines","lines","setActivePlayer","currentPlayerPosition","setGameWord","word","startGuess","player","guessing","endGuess","submitGuess","correct","endGame","spy","setState","state","url","window","location","protocol","socket","WebSocket","pingServer","a","Promise","resolve","addEventListener","catch","e","console","error","submitLines","code","strokeStyle","lineWidth","content","send","JSON","stringify","getState","listenForMessage","callback","event","data","parse","ClassName","InvalidRoomModal","props","Modal","open","onClose","aria-labelledby","aria-describedby","className","Button","variant","onClick","RoomConnect","dispatch","useDispatch","useState","setCode","nameError","setNameError","roomCodeError","setRoomCodeError","invalidRoom","useSelector","players","history","useHistory","useEffect","length","push","TextField","value","color","placeholder","onChange","target","fullWidth","inputProps","style","fontSize","submitRoomCode","generateRoomCode","Landing","log","connect","playerColourMap","Consumer","store","background","map","index","key","colours","setColour","roomCode","obj","id","colourIsAvailable","getItemClassName","getPlayerInfo","item","sessionStorage","getItem","SessionStorageKey","useLocation","info","setItem","pathname","startRoomGame","Palette","setColor","setStrokeStyle","setLineWidth","width","height","Canvas","canvasLines","canvas","ctx","line","startX","startY","endX","endY","linesToSend","alreadySent","pressedFlag","document","getElementById","canDraw","setCanvas","handleMouseMove","handleMouseDown","handleMouseUp","handleMouseOut","addLinesFromServer","removeEventListener","setTimeout","adjustedLines","resizeLinesForServer","clientX","offsetLeft","clientY","offsetTop","touches","beginPath","fillStyle","fillRect","closePath","preventDefault","Object","assign","draw","onEndStroke","moveTo","lineTo","stroke","resizeLinesForCanvas","getContext","canvasWidth","innerWidth","canvasHeight","innerHeight","onresize","border","showPalette","position","top","left","GuessSpyPanel","onSubmit","guessedName","guessingPlayer","playerNames","backgroundColor","InfoPanel","onGuessPressed","Timer","startingSeconds","timerSeconds","setTimerSeconds","gameEnded","seconds","minutes","Math","floor","remainingSeconds","minutesDisplay","secondsDisplay","convertSecondsToTimer","GameEnd","guessedSpy","EXTRA_ROLES","roleName","roleCount","Game","ConnectState","gameState","gameWord","possibleRoles","activePlayer","playerCount","keys","totalExtraRoles","defaultRole","allRoles","concat","getRole","getGameWord","getFirstPlayer","isActivePlayer","endTurn","App","LOADING","connected","setConnected","success","handleServerMessage","SessionStorageUtils","CONNECTED","FAILED","attemptConnection","message","linesFromPlayer","exact","path","Boolean","hostname","match","initialState","RootReducer","action","isGuessing","partialState","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"+TAAaA,EAAW,WACXC,EAAW,WACXC,EAAa,aACbC,EAAmB,mBACnBC,EAAoB,oBACpBC,EAAqB,qBACrBC,EAAW,WACXC,EAAY,YACZC,EAAc,cACdC,EAAW,WAEXC,EAAoB,oBACpBC,EAAgB,gBAChBC,EAAe,eACfC,EAAoB,oBACpBC,EAAW,WACXC,EAAY,YCoHVC,EAjIC,CACdC,QAAS,SAACC,GACR,MAAO,CACLC,KAAMC,EACNC,QAASH,IAIbI,QAAS,SAACC,GACR,MAAO,CACLJ,KAAMC,EACNC,QAASE,IAIbC,WAAY,SAACC,GACX,MAAO,CACLN,KAAMC,EACNC,QAASI,IAIbC,mBAAoB,SAACC,GACnB,MAAO,CACLR,KAAMC,EACNC,QAASM,IAIbC,gBAAiB,SAACC,EAAoBC,GACpC,MAAO,CACLX,KAAMC,EACNC,QAAS,CACPQ,WAAYA,EACZC,OAAQA,KAKdC,iBAAkB,SAACC,GACjB,MAAO,CACLb,KAAMC,EACNC,QAASW,IAIbC,QAAS,SAACC,GACR,MAAO,CACLf,KAAMC,EACNC,QAASa,IAIbC,WAAY,SAACC,GACX,MAAO,CACLjB,KAAMC,EACNC,QAASe,IAIbC,QAAS,SAACC,GACR,MAAO,CACLnB,KAAMC,EACNC,QAASiB,IAIbC,SAAU,SAACC,GACT,MAAO,CACLrB,KAAMC,EACNC,QAASmB,IAIbC,gBAAiB,SAACC,GAChB,MAAO,CACLvB,KAAMC,EACNC,QAASqB,IAIbC,YAAa,SAACC,GACZ,MAAO,CACLzB,KAAMC,EACNC,QAASuB,IAIbC,WAAY,SAACC,GACX,MAAO,CACL3B,KAAMC,EACNC,QAAS,CACPQ,WAAYiB,EACZC,UAAU,KAKhBC,SAAU,WACR,MAAO,CACL7B,KAAMC,EACNC,QAAS,CACP0B,UAAU,KAKhBE,YAAa,SAACC,GACZ,MAAO,CACL/B,KAAMC,EACNC,QAAS6B,IAIbC,QAAS,SAACC,GACR,MAAO,CACLjC,KAAMC,EACNC,QAAS+B,IAIbC,SAAU,SAACC,GACT,MAAO,CACLnC,KAAMC,EACNC,QAASiC,KC7HTC,EAAmC,WAA7BC,OAAOC,SAASC,SAC3B,+CACA,sBACKC,EAAS,IAAIC,UAAUL,GAWtB,SAAeM,IAAtB,+B,4CAAO,sBAAAC,EAAA,+EACC,IAAIC,SAAiB,SAAAC,GAC3BL,EAAOM,iBAAiB,QAAQ,WAC/BD,GAAQ,SAEPE,OAAM,SAAAC,GAER,OADAC,QAAQC,MAAMF,IACP,MAPF,4C,sBA+BA,SAASG,EAAYC,EAAczB,EAAgBN,EAAgBgC,EAAqBC,GAC9F,IAAMC,EAAU,CAAEH,KAAMA,EAAMzB,OAAQA,EAAQN,MAAOA,EAAOgC,YAAaA,EAAaC,UAAWA,GACjGd,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,OAAQuD,QAASE,KAAKC,UAAUH,MAsC7D,SAASI,EAASP,EAAc1C,GACtC,IAAM6C,EAAU,CAAEH,KAAMA,EAAMhD,KAAMM,GACpC8B,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,WAAYuD,QAASE,KAAKC,UAAUH,MAGjE,SAASK,EAAiBC,GAChCrB,EAAOM,iBAAiB,WAAW,SAAAgB,GAC9BA,EAAMC,MACTF,EAASJ,KAAKO,MAAMF,EAAMC,U,mBCpFvBE,EACO,aADPA,EAEK,wBAFLA,EAGI,uBA6BKC,MA1Bf,SAA0BC,GACzB,OACG,kBAACC,EAAA,EAAD,CACEC,KAAMF,EAAME,KACZC,QAASH,EAAMG,QACfC,kBAAgB,qBAChBC,mBAAiB,4BAGf,yBAAKC,UAAWR,GACd,yBAAKQ,UAAWR,GAAhB,QACQE,EAAMpE,KADd,kBAGA,kBAAC2E,EAAA,EAAD,CACEC,QAAQ,YACRC,QAAS,kBAAMT,EAAMG,WACrBG,UAAWR,GAHb,YCpBJA,EACO,wBAgIEY,EA7HK,WAClB,IAAMC,EAAWC,cAEjB,EAAwBC,mBAAS,IAAjC,mBAAO5B,EAAP,KAAa6B,EAAb,KACA,EAAwBD,mBAAS,IAAjC,mBAAO5E,EAAP,KAAaD,EAAb,KAEA,EAAkC6E,oBAAS,GAA3C,mBAAOE,EAAP,KAAkBC,EAAlB,KACA,EAA0CH,oBAAS,GAAnD,mBAAOI,EAAP,KAAsBC,EAAtB,KAEMC,EAAcC,aAA0B,SAAApD,GAAK,OAAIA,EAAMmD,eACvDE,EAAUD,aAA0B,SAAApD,GAAK,OAAIA,EAAMqD,WAEnDC,EAAUC,cAYhB,OARAC,qBAAU,YACHL,GAAeE,EAAQI,OAAS,IACnCd,EAASjF,EAAQM,QAAQC,IACzB0E,EAASjF,EAAQC,QAAQsD,IACzBqC,EAAQI,KAAK,YAEd,CAACP,EAAaE,IAGf,yBAAKf,UAAWR,GACd,kBAAC,EAAD,CACElE,KAAMqD,EACNiB,KAAMiB,EACNhB,QAAS,WACPQ,EAASjF,EAAQU,oBAAmB,OAGxC,6BACE,kBAACuF,EAAA,EAAD,CACE5C,MAAOgC,EACPa,MAAO3F,EACP4F,MAAM,UACNC,YAAY,oBACZC,SAAU,SAAApC,GACR3D,EAAQ2D,EAAMqC,OAAOJ,OACjBb,GACFC,GAAa,IAGjBiB,WAAW,EACXC,WAAY,CACVC,MAAO,CAAEC,SAAU,0BAIzB,uDAGA,6BACE,kBAACT,EAAA,EAAD,CACE5C,MAAOkC,EACPW,MAAO3C,EACP4C,MAAM,UACNC,YAAY,kBACZC,SAAU,SAAApC,GACRmB,EAAQnB,EAAMqC,OAAOJ,OACjBX,GACFC,GAAiB,IAGrBe,WAAW,EACXC,WAAY,CACVC,MAAO,CAAEC,SAAU,0BAIzB,6BACE,kBAAC7B,EAAA,EAAD,CACEC,QAAQ,YACRqB,MAAM,UACNpB,QAAS,WAILO,GAHG/E,GAQHiF,GAHGjC,GAKDhD,GAAQgD,GFrEjB,SAAwBA,EAAczB,GAC5C,IAAM4B,EAAU,CAAEH,KAAMA,EAAMzB,OAAQA,GACtCa,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,cAAeuD,QAASE,KAAKC,UAAUH,MEoE7DiD,CAAepD,EAAMhD,IAGzBgG,WAAW,EACXE,MAAO,CAAEC,SAAU,uBAnBrB,WAwBF,8CAGA,6BACE,kBAAC7B,EAAA,EAAD,CACEC,QAAQ,YACRqB,MAAM,UACNpB,QAAU,WACRS,GAAiB,GACZjF,GAGH+E,GAAa,GFhGpB,SAA0B/E,GAChC,IAAMmD,EAAU,CAAE5B,OAAQvB,GAC1BoC,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,UAAWuD,QAASE,KAAKC,UAAUH,ME+FzDkD,CAAiBrG,GACjB0E,EAASjF,EAAQM,QAAQC,IACzBqF,EAAQI,KAAK,UALbV,GAAa,IAQjBiB,WAAW,EACXE,MAAO,CAAEC,SAAU,uBAfrB,eClGOG,EAdC,WAEd,OADAzD,QAAQ0D,IAAI,aAEV,oCACE,yBAAKlC,UAAU,UACb,yBAAKA,UAAU,aAAf,aAIF,kBAAC,EAAD,QCPAR,EACE,kBADFA,EAEC,iBAFDA,EAGE,kBA4DO2C,eAPS,SAACzE,GACvB,MAAO,CACLqD,QAASrD,EAAMqD,QACfqB,gBAAiB1E,EAAM0E,mBAIZD,EAzDI,WACjB,OACE,kBAAC,IAAkBE,SAAnB,MACG,YAAgB,IACT3E,EADQ,EAAZ4E,MACkBpD,WACpB,OACE,oCACE,yBAAKc,UAAWR,GACd,yBAAKQ,UAAWR,GAEZ9B,EAAM/B,QAIN+B,EAAM0E,gBAAgB1E,EAAM/B,OAC5B,yBACEqE,UAAWR,EACXqC,MAAO,CAAEU,WAAY7E,EAAM0E,gBAAgB1E,EAAM/B,UAIzD,6BAEI+B,EAAMqD,QAAQyB,KAAI,SAAC7G,EAAc8G,GAC/B,GAAI/E,EAAM/B,OAASA,EACjB,OACE,yBAAK+G,IAAKD,GACR,yBAAKzC,UAAWR,GACd,yBAAKQ,UAAWR,GAAkB7D,KAE9B+B,EAAM0E,gBAAgBzG,IACtB,yBACEqE,UAAWR,EACXqC,MAAO,CAAEU,WAAY7E,EAAM0E,gBAAgBzG,mBCtCrE6D,EACO,yBADPA,GAEE,oBAFFA,GAGK,uBAHLA,GAIS,cAGTmD,GAAU,CACd,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAkEaR,gBATS,SAACzE,GACvB,MAAO,CACLpC,KAAMoC,EAAMpC,KACZK,KAAM+B,EAAM/B,KACZoF,QAASrD,EAAMqD,QACfqB,gBAAiB1E,EAAM0E,mBAIZD,EA/DM,WAEnB,IAAMS,EAAY,SAACC,EAAkB5G,EAAoB6G,ILOpD,SAAyBnE,EAAc1C,EAAoBC,GACjE,IAAM4C,EAAU,CAAEH,KAAMA,EAAMhD,KAAMM,EAAYC,OAAQA,GACxD6B,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,kBAAmBuD,QAASE,KAAKC,UAAUH,MKR7E9C,CAAgB6G,EAAU5G,EAAY6G,EAAIC,KAGpCC,EAAoB,SAAC9G,EAAgBkG,GACzC,IAAK,IAAMlF,KAAUkF,EACnB,GAAIA,EAAgBlF,KAAYhB,EAC9B,OAAO,EAGX,OAAO,GAGH+G,EAAmB,SAAC/G,EAAgBkG,GACxC,OAAIY,EAAkB9G,EAAQkG,GACtB,GAAN,OAAU5C,IAEN,GAAN,OAAUA,GAAV,YAA4BA,KAG9B,OACE,kBAAC,IAAkB6C,SAAnB,MACG,YAAgB,IACT3E,EADQ,EAAZ4E,MACkBpD,WACpB,OACC,yBAAKc,UAAWR,GACd,6CACG,yBAAKQ,UAAWR,IAEZmD,GAAQH,KAAI,SAACtG,EAAQuG,GAAT,OACZ,yBACItC,QAAU,SAAA5B,GACJyE,EAAkB9G,EAAQwB,EAAM0E,kBAClCQ,EAAUlF,EAAMpC,KAAMoC,EAAM/B,KAAM4C,EAAEmD,SAGxCG,MAAO,CAAEU,WAAYrG,GACrB6G,GAAI7G,EACJwG,IAAKD,EACLzC,UAAWiD,EAAiB/G,EAAQwB,EAAM0E,8BC1DzD,SAASc,KACd,IAAMC,EAAOC,eAAeC,QAAQC,kBACpC,GAAIH,EACF,OAAOnE,KAAKO,MAAM4D,GCJtB,IAAM3D,GACO,iBAkDb,IAOe2C,gBAPS,SAACzE,GACvB,MAAO,CACLpC,KAAMoC,EAAMpC,KACZkB,QAASkB,EAAMlB,WAIJ2F,EAtDf,WACE,IAAMnB,EAAUC,cACVpD,EAAW0F,cACXjI,EAAOwF,aAA0B,SAAApD,GAAK,OAAIA,EAAMpC,QAChDK,EAAOmF,aAA0B,SAAApD,GAAK,OAAIA,EAAM/B,QAWtD,OATAuF,qBAAU,WDbL,IAAuBsC,ECctB7H,GAAQL,IDdckI,ECeU,CAChC7H,KAAMA,EACNL,KAAMA,GDhBb8H,eAAeK,QAAQH,iBAA8BtE,KAAKC,UAAUuE,OCmBhE,IAGD,kBAAC,IAAkBnB,SAAnB,MACG,YAAgB,IACT3E,EADQ,EAAZ4E,MACkBpD,WAIpB,MAH0B,SAAtBrB,EAAS6F,UAAuBhG,EAAMlB,SACxCwE,EAAQI,KAAK,SAGb,yBAAKpB,UAAWR,IACd,oCACU9B,EAAMpC,MAEhB,kBAAC,EAAD,MACA,kBAAC,GAAD,MACA,kBAAC2E,EAAA,EAAD,CACEC,QAAQ,YACRqB,MAAM,UACNpB,QAAS,YPJhB,SAAuBxB,GAC7B,IAAMG,EAAU,CAAEH,KAAMA,GACxBZ,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,YAAauD,QAASE,KAAKC,UAAUH,MOGzD6E,CAAcjG,EAAMpC,OAEtBqG,WAAW,EACXE,MAAO,CAAEC,SAAU,uBAPrB,qBCXG8B,OAzBf,SAAiBlE,GAEhB,IAAMmE,EAAW,SAACf,GACjBpD,EAAMoE,eAAehB,EAAIC,IACV,UAAXD,EAAIC,GACPrD,EAAMqE,aAAa,IAGnBrE,EAAMqE,aAAa,IAIrB,OACE,oCACE,yBAAK5D,QAAU,SAAA5B,GAAC,OAAIsF,EAAStF,EAAEmD,UAA/B,gBACA,yBAAKvB,QAAU,SAAA5B,GAAC,OAAIsF,EAAStF,EAAEmD,SAA4BG,MAAO,CAAEmC,MAAO,OAAQC,OAAQ,OAAQ1B,WAAY,SAAWQ,GAAG,UAC7H,yBAAK5C,QAAU,SAAA5B,GAAC,OAAIsF,EAAStF,EAAEmD,SAA4BG,MAAO,CAAEmC,MAAO,OAAQC,OAAQ,OAAQ1B,WAAY,QAAUQ,GAAG,SAC5H,yBAAK5C,QAAU,SAAA5B,GAAC,OAAIsF,EAAStF,EAAEmD,SAA4BG,MAAO,CAAEmC,MAAO,OAAQC,OAAQ,OAAQ1B,WAAY,OAASQ,GAAG,QAC3H,yBAAK5C,QAAU,SAAA5B,GAAC,OAAIsF,EAAStF,EAAEmD,SAA4BG,MAAO,CAAEmC,MAAO,OAAQC,OAAQ,OAAQ1B,WAAY,UAAYQ,GAAG,WAC9H,yBAAK5C,QAAU,SAAA5B,GAAC,OAAIsF,EAAStF,EAAEmD,SAA4BG,MAAO,CAAEmC,MAAO,OAAQC,OAAQ,OAAQ1B,WAAY,UAAYQ,GAAG,WAC9H,yBAAK5C,QAAU,SAAA5B,GAAC,OAAIsF,EAAStF,EAAEmD,SAA4BG,MAAO,CAAEmC,MAAO,OAAQC,OAAQ,OAAQ1B,WAAY,SAAWQ,GAAG,YC2MnHmB,OA1Nf,SAAgBxE,GACf,IAAM9C,EAAQkE,aAA0B,SAAApD,GAAK,OAAIA,EAAMyG,eACjDtB,EAAW/B,aAA0B,SAAApD,GAAK,OAAIA,EAAMpC,QACpDW,EAAa6E,aAA0B,SAAApD,GAAK,OAAIA,EAAM/B,QACrDyG,EAAkBtB,aAA0B,SAAApD,GAAK,OAAIA,EAAM0E,mBAClEtB,aAA0B,SAAApD,GAAK,OAAIA,EAAMpB,QAEzC,IAaI8H,EACAC,EAdAzF,EAAcwD,EAAgBnG,GAC9B4C,EAAY,EACVyF,EAAc,CACnBC,OAAQ,EACRC,OAAQ,EACRC,KAAM,EACNC,KAAM,GAEHC,EAAuB,GACvBC,GAAc,EAEbC,GAAc,EAKnB3D,qBAAU,WAcP,OAbAkD,EAASU,SAASC,eAAe,YACrBrF,EAAMsF,UAChBC,IACHb,EAAO/F,iBAAiB,YAAa6G,GACrCd,EAAO/F,iBAAiB,YAAa8G,GACrCf,EAAO/F,iBAAiB,UAAW+G,GACnChB,EAAO/F,iBAAiB,WAAYgH,GACjCjB,EAAO/F,iBAAiB,YAAa6G,GACxCd,EAAO/F,iBAAiB,aAAc8G,GACtCf,EAAO/F,iBAAiB,WAAY+G,GACpChB,EAAO/F,iBAAiB,cAAegH,IAEtCC,IACO,WACLlB,EAAOmB,oBAAoB,YAAaL,GACxCd,EAAOmB,oBAAoB,YAAaJ,GACxCf,EAAOmB,oBAAoB,UAAWH,GACtChB,EAAOmB,oBAAoB,WAAYF,GACvCjB,EAAOmB,oBAAoB,YAAaL,GAC3Cd,EAAOmB,oBAAoB,aAAcJ,GACzCf,EAAOmB,oBAAoB,WAAYH,GACvChB,EAAOmB,oBAAoB,cAAeF,MAExC,CAAC3F,EAAMsF,UAEV,IAAMG,EAAkB,SAAC5G,GACvBsG,GAAc,EACdD,GAAc,EACdY,YAAW,WACT,IAAKZ,EAAa,CAChB,IAAMa,EAAgBC,EAAqBf,GAC3CjG,EAAYmE,EAAU5G,EAAYwJ,EAAe7G,EAAaC,GAC9D8F,EAAc,MAEf,KACHL,EAAKC,OAASD,EAAKG,KACnBH,EAAKE,OAASF,EAAKI,KACdnG,EAAiBoH,SACpBrB,EAAKG,KAAQlG,EAAiBoH,QAAUvB,EAAOwB,WAC/CtB,EAAKI,KAAQnG,EAAiBsH,QAAUzB,EAAO0B,WACrCvH,EAAiBwH,UAC3BzB,EAAKG,KAAQlG,EAAiBwH,QAAQ,GAAGJ,QAAUvB,EAAOwB,WAC1DtB,EAAKI,KAAQnG,EAAiBwH,QAAQ,GAAGF,QAAUzB,EAAO0B,YAGlD,IAGRzB,EAAI2B,YACJ3B,EAAI4B,UAAYrH,EAChByF,EAAI6B,SAAS5B,EAAKG,KAAMH,EAAKI,KAAM,EAAG,GACtCL,EAAI8B,aACM,IAIRjB,EAAkB,SAAC3G,GACvBA,EAAE6H,iBACEvB,IACFP,EAAKC,OAASD,EAAKG,KACnBH,EAAKE,OAASF,EAAKI,KACdnG,EAAiBoH,SACpBrB,EAAKG,KAAQlG,EAAiBoH,QAAUvB,EAAOwB,WAC/CtB,EAAKI,KAAQnG,EAAiBsH,QAAUzB,EAAO0B,WACrCvH,EAAiBwH,UAC3BzB,EAAKG,KAAQlG,EAAiBwH,QAAQ,GAAGJ,QAAUvB,EAAOwB,WAC1DtB,EAAKI,KAAQnG,EAAiBwH,QAAQ,GAAGF,QAAUzB,EAAO0B,WAE5DnB,EAAYvD,KAAKiF,OAAOC,OAAO,GAAIhC,IACnCiC,EAAKjC,KAIHc,EAAgB,WACpB,GAAIP,IAAgBD,EAAa,CAC/B,IAAMa,EAAgBC,EAAqBf,GAC3CjG,EAAYmE,EAAU5G,EAAYwJ,EAAe7G,EAAaC,GAC9D8F,EAAc,GACdjF,EAAM8G,cAER3B,GAAc,GAGVQ,EAAiB,WACrBD,KAGGmB,EAAO,SAACjC,GACbW,IACAZ,EAAI2B,YACJ3B,EAAIoC,OAAOnC,EAAKC,OAAQD,EAAKE,QAC7BH,EAAIqC,OAAOpC,EAAKG,KAAMH,EAAKI,MACrB,eAAgBJ,EACrBD,EAAIzF,YAAcwD,EAAgBkC,EAAKrI,YAC3BmG,EAAgBnG,GAC5BoI,EAAIzF,YAAcwD,EAAgBnG,GAElCoI,EAAIzF,YADM,gBAAiB0F,EACTA,EAAK1F,YAELA,EAGlByF,EAAIxF,UADD,cAAeyF,EACFA,EAAKzF,UAELA,EAEjBwF,EAAIsC,SACJtC,EAAI8B,aAGCb,EAAqB,WACxB,IAD8B,EACxBG,EAAgBmB,EAAqBhK,GADb,cAEb6I,GAFa,IAEhC,2BAAkC,CAAC,IAAxBnB,EAAuB,QACjCiC,EAAKjC,IAH0B,gCAO3BW,EAAY,WACZZ,IACCD,IACJA,EAASU,SAASC,eAAe,WAElCV,EAAMD,EAAOyC,WAAW,QAYrBC,EAAc,GAAMlJ,OAAOmJ,WAC3BC,EAAeF,EACfE,EAAepJ,OAAOqJ,cACxBH,EAAc,GAAMlJ,OAAOqJ,YAC3BD,EAAeF,GAGjB,IAAMF,EAAuB,SAAChK,GAC5B,IAD4E,EACtE6I,EAAmC,GADmC,cAEzD7I,GAFyD,IAE5E,2BAA0B,CAAC,IAAhB0H,EAAe,QACxBmB,EAAcrE,KAAK,CACjBmD,OAAQD,EAAKC,OAASuC,EACtBrC,KAAMH,EAAKG,KAAOqC,EAClBtC,OAAQF,EAAKE,OAASwC,EACtBtC,KAAMJ,EAAKI,KAAOsC,EAClB/K,WAAYqI,EAAKrI,cARuD,8BAW5E,OAAOwJ,GAGHC,EAAuB,SAAC9I,GAC5B,IADwD,EAClD6I,EAAgB,GADkC,cAErC7I,GAFqC,IAExD,2BAA0B,CAAC,IAAhB0H,EAAe,QACxBmB,EAAcrE,KAAK,CACjBmD,OAAQD,EAAKC,OAASuC,EACtBrC,KAAMH,EAAKG,KAAOqC,EAClBtC,OAAQF,EAAKE,OAASwC,EACtBtC,KAAMJ,EAAKI,KAAOsC,KAPkC,8BAUxD,OAAOvB,GAOV,OAJC7H,OAAOsJ,SAAW,aAKjB,oCACE,4BACKnE,GAAG,SACHiB,MAAO8C,EACP7C,OAAQ+C,EACRnF,MAAO,CACLsF,OAAQ,eAIVzH,EAAM0H,aACT,kBAAC,GAAD,CACKtD,eAAgB,SAAAf,GAAE,OA3DL,SAACA,GACtBnE,EAAcmE,EA0DgBe,CAAef,IACrCgB,aAAc,SAAAC,GAAK,OAxDR,SAACA,GACpBnF,EAAYmF,EAuDmBD,CAAaC,MAG3C,yBAAKjB,GAAG,YAAYlB,MAAO,CAAEwF,SAAU,WAAYC,IAAK,MAAOC,KAAM,WChNpE/H,GACO,aA4CEgI,OAzCf,SAAuB9H,GACrB,IAAM+H,EAAW,SAAC9L,IV4Db,SAAqBgD,EAAc+I,GACzC,IAAM5I,EAAU,CAAEH,KAAMA,EAAM+I,YAAaA,GAC3C3J,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,cAAeuD,QAASE,KAAKC,UAAUH,MU7DvEzB,CAAYqC,EAAMpE,KAAMK,GACxB+D,EAAMG,WAGT,OACG,kBAACF,EAAA,EAAD,CACEC,KAAMF,EAAME,KACZC,QAASH,EAAMG,QACfC,kBAAgB,qBAChBC,mBAAiB,4BAGf,yBAAKC,UAAWR,IAEZE,EAAMiI,iBAAmBjI,EAAM/D,KAC7B+D,EAAMkI,YAAYpF,KAAI,SAAC7G,EAAM8G,GAC3B,GAAI9G,IAAS+D,EAAM/D,KACjB,OAAO,kBAACsE,EAAA,EAAD,CACLC,QAAQ,YACRC,QAAS,kBAAMsH,EAAS9L,IACxB+G,IAAKD,EACLZ,MAAO,CACLgG,gBAAiBnI,EAAM0C,gBAAkB1C,EAAM0C,gBAAgBzG,GAAQ,QACvE4F,MAAO,SAGR5F,MAKP,6BAAM+D,EAAMiI,eAAZ,oBCKCG,OAxCf,SAAmBpI,GAClB,IAAMqI,EAAiB,YXoDjB,SAAoBpJ,EAAc1C,GACxC,IAAM6C,EAAU,CAAEH,KAAMA,EAAMhD,KAAMM,GACpC8B,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,aAAcuD,QAASE,KAAKC,UAAUH,MWrDxE7B,CAAWyC,EAAMpE,KAAMoE,EAAM/D,OAGxBkE,EAAU,YXqDV,SAAkBlB,GACxB,IAAMG,EAAU,CAAEH,KAAMA,GACxBZ,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,WAAYuD,QAASE,KAAKC,UAAUH,MWtDtE1B,CAASsC,EAAMpE,OAGhB,OACC,yBAAK0E,UAZW,uBAaf,sCAAYN,EAAMpE,MAClB,sCAAYoE,EAAMpD,QAEfoD,EAAM1C,MACP,oCACC,sCAAY0C,EAAM1C,MAClB,kBAACiD,EAAA,EAAD,CACCC,QAAQ,YACRqB,MAAM,UACNpB,QAAS,kBAAM4H,MAHhB,kBASH,kBAAC,GAAD,CACCrF,IAAKhD,EAAMiI,eACXhM,KAAM+D,EAAM/D,KACZL,KAAMoE,EAAMpE,KACZsM,YAAalI,EAAMkI,YACnBhI,OAAQF,EAAMiI,eACd9H,QAAS,kBAAMA,KACf8H,eAAgBjI,EAAMiI,eACtBvF,gBAAiB1C,EAAM0C,oBCjBZ4F,OA1Bf,SAAetI,GACb,MAA0Ca,mBAAiBb,EAAMuI,iBAAjE,mBAAQC,EAAR,KAAsBC,EAAtB,KAkBD,OAhBCjH,qBAAU,WACJgH,EAAe,IAAMxI,EAAM0I,WAC7B5C,YAAW,WACT2C,EAAgBD,EAAe,KAC9B,QAaP,yBAAKlI,UAtBW,uBAuBZ,0BAAM+C,GAAG,QAViB,SAACsF,GAC7B,IAAMC,EAAUC,KAAKC,MAAMH,EAAU,IAC/BI,EAAmBJ,EAAoB,GAAVC,EAC7BI,EAAiBJ,EAAU,GAAV,WAAmBA,GAAnB,UAAkCA,GACnDK,EAAiBF,EAAmB,GAAnB,WAA4BA,GAA5B,UAAoDA,GAC3E,MAAM,GAAN,OAAUC,EAAV,YAA4BC,GAKRC,CAAsBV,MCD/BW,OAnBf,SAAiBnJ,GAYhB,OACC,yBAAKM,UAfW,qBAIVN,EAAMoJ,YAAcpJ,EAAMlC,MAAQkC,EAAMzD,WACnC,gDACEyD,EAAMoJ,WACR,6BAAMpJ,EAAMlC,IAAZ,qBACEkC,EAAMlC,MAAQkC,EAAMzD,WACtB,6BAAMyD,EAAMlC,IAAZ,UAEF,2CCPLuL,GAA6B,CACjC,CACEC,SAAU,MACVC,UAAW,IAiIAC,ICrIVC,GDqIUD,GA5Gf,WACC,IAAM7I,EAAWC,cAEV8I,EAAYtI,aAA0B,SAAApD,GAAK,MAC/C,CACEhB,KAAMgB,EAAMhB,KACZmG,SAAUnF,EAAMpC,KAChB0B,KAAMU,EAAM2L,SACZpN,WAAYyB,EAAM/B,KAClB2N,cAAe5L,EAAM4L,cACrBvI,QAASrD,EAAMqD,QACfwI,aAAc7L,EAAM6L,aACpB5B,eAAgBjK,EAAMiK,eACtBrL,KAAMoB,EAAMpB,KACZ8L,UAAW1K,EAAM0K,UACjBU,WAAYpL,EAAMoL,WAClBtL,IAAKE,EAAMF,IACXhB,QAASkB,EAAMlB,YAIpB0E,qBAAU,WACT,GAAuC,IAAnCkI,EAAUE,cAAcnI,OAAc,CACzC,IADyC,EACnCqI,EAAcnD,OAAOoD,KAAKL,EAAUrI,SAASI,OAC/CuI,EAAkB,EAFmB,cAGtBX,IAHsB,IAGzC,2BAAgC,CAC/BW,GAD+B,QACPT,WAJgB,8BAMzC,IAAMU,EAA2B,CAChCX,SAvDiB,SAwDjBC,UAAWO,EAAcE,GAEpBE,EAAWb,GAAYc,OAAOF,GACpCtJ,EAASjF,EAAQe,iBAAiByN,IAC3BR,EAAU5M,SdnBb,SAAiBmC,EAAczB,EAAgBoM,GACrD,IAAMxK,EAAU,CAAEH,KAAMA,EAAMhD,KAAMuB,EAAQoM,cAAeA,GAC3DvL,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,UAAWuD,QAASE,KAAKC,UAAUH,MckBlEgL,CAAQV,EAAUvG,SAAUuG,EAAUnN,WAAY2N,GdfhD,SAAqBjL,EAAc1C,GACzC,IAAM6C,EAAU,CAAEH,KAAMA,EAAMhD,KAAMM,GACpC8B,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,UAAWuD,QAASE,KAAKC,UAAUH,McclEiL,CAAYX,EAAUvG,SAAUuG,EAAUnN,YdXxC,SAAwB0C,GAC9B,IAAMG,EAAU,CAAEH,KAAMA,GACxBZ,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,iBAAkBuD,QAASE,KAAKC,UAAUH,McUtEkL,CAAeZ,EAAUvG,WAEzBxC,EAASjF,EAAQmB,YAAW,QAKlC,IAAM0N,EAAiB,WACrB,OAAOb,EAAUnN,aAAemN,EAAUG,cAGvC/C,EAAc,YdlBd,SAAiB7H,GACvB,IAAMG,EAAU,CAAEH,KAAMA,GACxBZ,EAAOgB,KAAKC,KAAKC,UAAU,CAAE1D,KAAM,UAAWuD,QAASE,KAAKC,UAAUH,MciBrEoL,CAAQd,EAAUvG,WAGnB,OACC,oCACI,kBAAC,GAAD,CACEoF,gBAAiBmB,EAAU1M,KAC3B0L,UAAWgB,EAAUhB,YAGpBgB,EAAUhB,UAqCT,oCACE,kBAAC,GAAD,CACEU,WAAYM,EAAUN,WACtBtL,IAAK4L,EAAU5L,IACfvB,WAAYmN,EAAUnN,cAxC1B,oCAEIgO,IACE,yCAIA,2BACGb,EAAUG,aADb,aAKJH,EAAU9M,KACX,oCACC,kBAAC,GAAD,CACChB,KAAM8N,EAAUvG,SACTlH,KAAMyN,EAAUnN,WACvBK,KAAM8M,EAAU9M,KAChBU,KAAMoM,EAAUpM,KACT4K,YAAawB,EAAUrI,QACvB4G,eAAgByB,EAAUzB,eAC1BvF,gBAAiBgH,EAAUhH,kBAEnC,kBAAC,GAAD,CACQ4C,QAASiF,IACT7C,aAAa,EACpBZ,YAAa,kBAAMA,QAIrB,sD,gBCnHN2C,O,qBAAAA,I,yBAAAA,I,oBAAAA,Q,KAML,IA6HegB,GA7HH,WACV,IAAM9J,EAAWC,cACjB,EAAoCC,mBAAuB4I,GAAaiB,SAAxE,mBAAQC,EAAR,KAAmBC,EAAnB,KAEApJ,qBAAU,YACe,uCAAG,8BAAAhD,EAAA,6DACpBqM,GAAU,EADU,kBAGNtM,IAHM,OAGtBsM,EAHsB,uDAKtB/L,QAAQC,MAAR,MALsB,QAOpB8L,GACFpL,EAAiBqL,IACXhH,EAAOiH,OAEXvL,EAASsE,EAAKlI,KAAMkI,EAAK7H,MAEvB0O,IAAclB,GAAauB,WAC7BJ,EAAanB,GAAauB,YAGxBL,IAAclB,GAAawB,QAC7BL,EAAanB,GAAawB,QAlBN,yDAAH,qDAsBvBC,KACC,IAEH,IAAMJ,EAAsB,SAACK,GAC3B,OAAQA,EAAQtP,MACd,IAAK,UACH,IAAIoD,EAIFA,EAHGkM,EAAQ/L,SAAY+L,EAAQ/L,QAAQH,KAGhCkM,EAAQ/L,QAAQH,KAFhB,QAIT0B,EAASjF,EAAQC,QAAQsD,IACzB,MACF,IAAK,cACCkM,EAAQ/L,QAAQ/C,QAClBsE,EAASjF,EAAQU,oBAAmB,IAEpCuE,EAASjF,EAAQQ,WAAWiP,EAAQ/L,QAAQiC,UAE9C,MACF,IAAK,kBACHV,EAASjF,EAAQY,gBAAgB6O,EAAQ/L,QAAQnD,KAAMkP,EAAQ/L,QAAQ5C,SACvE,MACF,IAAK,YACHmE,EAASjF,EAAQqB,QAAQoO,EAAQ/L,QAAQpC,OACzC2D,EAASjF,EAAQmB,YAAW,IAC5B,MACF,IAAK,UACH8D,EAASjF,EAAQiB,QAAQwO,EAAQ/L,QAAQxC,OACzC,MACF,IAAK,UACH+D,EAASjF,EAAQ2B,YAAY8N,EAAQ/L,QAAQ9B,OAC7C,MACF,IAAK,OACH,IADF,EACQ8N,EAAqC,GAD7C,cAEqBD,EAAQ/L,QAAQlC,OAFrC,IAEE,2BAAqD,CAAC,IAA3C0H,EAA0C,QACnDwG,EAAgB1J,KAAK,CACnBmD,OAAQD,EAAKC,OACbC,OAAQF,EAAKE,OACbC,KAAMH,EAAKG,KACXC,KAAMJ,EAAKI,KACXzI,WAAY4O,EAAQ/L,QAAQnD,QARlC,8BAWE0E,EAASjF,EAAQuB,SAASmO,IAC1B,MACF,IAAK,UACL,IAAK,iBACHzK,EAASjF,EAAQyB,gBAAgBgO,EAAQ/L,QAAQyK,eACjD,MACF,IAAK,aACHlJ,EAASjF,EAAQ6B,WAAW4N,EAAQ/L,QAAQnD,OAC5C,MACF,IAAK,WACH0E,EAASjF,EAAQgC,YACjB,MACF,IAAK,cACHiD,EAASjF,EAAQiC,YAAYwN,EAAQ/L,QAAQxB,UAC7C,MACF,IAAK,UACH+C,EAASjF,EAAQmC,QAAQsN,EAAQ/L,QAAQtB,MACzC,MACF,IAAK,WACH6C,EAASjF,EAAQqC,SAASoN,EAAQ/L,QAAQpB,UAOhD,OAAI2M,IAAclB,GAAawB,OAE3B,yBAAK3K,UAAU,OACb,2DAKF,yBAAKA,UAAU,OACb,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO+K,OAAK,EAACC,KAAK,KAChB,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,SAChB,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,SAChB,kBAAC,GAAD,WC1HMC,QACW,cAA7BrN,OAAOC,SAASqN,UAEe,UAA7BtN,OAAOC,SAASqN,UAEhBtN,OAAOC,SAASqN,SAASC,MACvB,2D,uCCVAC,GAAwC,CAC5C9P,KAAM,GACNK,KAAM,GACNoF,QAAS,GACTqB,gBAAiB,GACjBmH,aAAc,GACdpF,YAAa,GACb3H,SAAS,EACTF,KAAM,GACNgN,cAAe,GACfD,SAAU,GACV1B,eAAgB,GAChBjL,MAAO,EACPoM,YAAY,EACZV,WAAW,EACX5K,IAAK,GACLqD,aAAa,GAgHAwK,GA7GuB,WAAmC,IAAlC3N,EAAiC,uDAAzB0N,GAAcE,EAAW,uCACtE,OAAQA,EAAO/P,MACb,KAAKC,EACH,IAAMF,EAAOgQ,EAAO7P,QACvB,OAAO,6BACHiC,GADJ,IAECpC,KAAMA,IAEN,KAAKE,EACH,IAAMG,EAAO2P,EAAO7P,QACvB,OAAO,6BACHiC,GADJ,IAEC/B,KAAMA,IAER,KAAKH,EACJ,IAAMK,EAAQyP,EAAO7P,QAClB,OAAO,6BACNiC,GADD,IAEFqD,QAASlF,IAET,KAAKL,EACN,IAAMO,EAAUuP,EAAO7P,QACpB,OAAO,6BACNiC,GADD,IAEFmD,YAAa9E,IAEb,KAAKP,EACN,IAAMS,EAAcqP,EAAO7P,QAA2CQ,WAC7DC,EAAUoP,EAAO7P,QAA2CS,OAClE,OAAO,6BACNwB,GADD,IAEF0E,gBAAgB,6BACP1E,EAAM0E,iBADA,mBAERnG,EAAaC,MAGpB,KAAKV,EACN,IAAMY,EAAQkP,EAAO7P,QAClB,OAAO,6BACNiC,GADD,IAEF4L,cAAelN,IAEf,KAAKZ,EACN,IAAMc,EAAOgP,EAAO7P,QACjB,OAAO,6BACNiC,GADD,IAEFpB,KAAMA,IAER,KAAKd,EACJ,IAAMgB,EAAU8O,EAAO7P,QACpB,OAAO,6BACNiC,GADD,IAEFlB,QAASA,IAET,KAAKhB,EACH,IAAMkB,EAAO4O,EAAO7P,QACpB,OAAO,6BACFiC,GADL,IAEEhB,KAAMA,IAEV,KAAKlB,EACH,IAAMoB,EAAQ0O,EAAO7P,QACrB,OAAO,6BACFiC,GADL,IAEEyG,YAAY,GAAD,oBAAOzG,EAAMyG,aAAb,aAA6BvH,MAE5C,KAAKpB,EACH,IAAM+N,EAAe+B,EAAO7P,QAC5B,OAAO,6BACFiC,GADL,IAEE6L,aAAcA,IAElB,KAAK/N,EACH,IAAMwB,EAAOsO,EAAO7P,QACpB,OAAO,6BACFiC,GADL,IAEE2L,SAAUrM,IAEd,KAAKxB,EACH,IAAMmM,EAAkB2D,EAAO7P,QAA0CQ,WACnEsP,EAAcD,EAAO7P,QAA0C0B,SACrE,OAAO,6BACFO,GADL,IAEEiK,eAAgB4D,EAAa5D,EAAiB,KAElD,KAAKnM,EACH,IAAMsN,EAAawC,EAAO7P,QAC1B,OAAO,6BACFiC,GADL,IAEEoL,WAAYA,IAEhB,KAAKtN,EACH,IAAMgC,EAAM8N,EAAO7P,QACnB,OAAO,6BACFiC,GADL,IAEE0K,WAAW,EACX5K,IAAKA,IAET,KAAKhC,EACH,IAAMgQ,EAAeF,EAAO7P,QAC5B,OAAO,6BACFiC,GACA8N,GAEP,QACE,OAAO9N,IC5HP4E,GCJGmJ,aAAYJ,GAAczN,OAAe8N,8BAAiC9N,OAAe8N,gCDMlGC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,CAAUvJ,MAAQA,IAChB,kBAAC,GAAD,QAGJwC,SAASC,eAAe,SFmHpB,kBAAmB+G,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEd7N,OAAM,SAAAG,GACLD,QAAQC,MAAMA,EAAMoM,c","file":"static/js/main.0665550e.chunk.js","sourcesContent":["export const SET_ROOM = \"SET_ROOM\";\r\nexport const SET_NAME = \"SET_NAME\";\r\nexport const ADD_PLAYER = \"ADD_PLAYER\";\r\nexport const SET_INVALID_ROOM = \"SET_INVALID_ROOM\";\r\nexport const SET_PLAYER_COLOUR = \"SET_PLAYER_COLOUR\";\r\nexport const SET_POSSIBLE_ROLES = \"SET_POSSIBLE_ROLES\";\r\nexport const SET_ROLE = \"SET_ROLE\";\r\nexport const ADD_LINES = \"ADD_LINES\";\r\nexport const SET_PLAYING = \"SET_PLAYING\";\r\nexport const SET_TIME = \"SET_TIME\";\r\nexport const SET_PLAYER_ORDER = \"SET_PLAYER_ORDER\";\r\nexport const SET_ACTIVE_PLAYER = \"SET_ACTIVE_PLAYER\";\r\nexport const SET_GAME_WORD = \"SET_GAME_WORD\";\r\nexport const SET_GUESSING = \"SET_GUESSING\";\r\nexport const SET_CORRECT_GUESS = \"SET_CORRECT_GUESS\";\r\nexport const END_GAME = \"END_GAME\";\r\nexport const SET_STATE = \"SET_STATE\";\r\n","import * as ActionTypes from \"./ActionTypes\";\r\nimport { ILineFromPlayer, IPlayerRole, IPlayerState } from \"../../interfaces/Interfaces\";\r\n\r\nconst Actions = {\r\n  setRoom: (room: string) => {\r\n    return {\r\n      type: ActionTypes.SET_ROOM,\r\n      payload: room\r\n    }\r\n  },\r\n\r\n  setName: (name: string) => {\r\n    return {\r\n      type: ActionTypes.SET_NAME,\r\n      payload: name\r\n    }\r\n  },\r\n\r\n  setPlayers: (names: string[]) => {\r\n    return {\r\n      type: ActionTypes.ADD_PLAYER,\r\n      payload: names\r\n    }\r\n  },\r\n\r\n  setInvalidRoomCode: (invalid: boolean) => {\r\n    return {\r\n      type: ActionTypes.SET_INVALID_ROOM,\r\n      payload: invalid\r\n    }\r\n  },\r\n\r\n  setPlayerColour: (playerName: string, colour: string) => {\r\n    return {\r\n      type: ActionTypes.SET_PLAYER_COLOUR,\r\n      payload: {\r\n        playerName: playerName,\r\n        colour: colour\r\n      }\r\n    }\r\n  },\r\n\r\n  setPossibleRoles: (roles: IPlayerRole[]) => {\r\n    return {\r\n      type: ActionTypes.SET_POSSIBLE_ROLES,\r\n      payload: roles\r\n    }\r\n  },\r\n\r\n  setRole: (role: string) => {\r\n    return {\r\n      type: ActionTypes.SET_ROLE,\r\n      payload: role\r\n    }\r\n  },\r\n\r\n  setPlaying: (playing: boolean) => {\r\n    return {\r\n      type: ActionTypes.SET_PLAYING,\r\n      payload: playing\r\n    }\r\n  },\r\n\r\n  setTime: (time: number) => {\r\n    return {\r\n      type: ActionTypes.SET_TIME,\r\n      payload: time\r\n    }\r\n  },\r\n\r\n  addLines: (lines: ILineFromPlayer[]) => {\r\n    return {\r\n      type: ActionTypes.ADD_LINES,\r\n      payload: lines\r\n    }\r\n  },\r\n\r\n  setActivePlayer: (currentPlayerPosition: number) => {\r\n    return {\r\n      type: ActionTypes.SET_ACTIVE_PLAYER,\r\n      payload: currentPlayerPosition\r\n    }\r\n  },\r\n\r\n  setGameWord: (word: string) => {\r\n    return {\r\n      type: ActionTypes.SET_GAME_WORD,\r\n      payload: word\r\n    }\r\n  },\r\n\r\n  startGuess: (player: string) => {\r\n    return {\r\n      type: ActionTypes.SET_GUESSING,\r\n      payload: {\r\n        playerName: player,\r\n        guessing: true\r\n      }\r\n    }\r\n  },\r\n\r\n  endGuess: () => {\r\n    return {\r\n      type: ActionTypes.SET_GUESSING,\r\n      payload: {\r\n        guessing: false\r\n      }\r\n    }\r\n  },\r\n\r\n  submitGuess: (correct: boolean) => {\r\n    return {\r\n      type: ActionTypes.SET_CORRECT_GUESS,\r\n      payload: correct\r\n    }\r\n  },\r\n\r\n  endGame: (spy: string) => {\r\n    return {\r\n      type: ActionTypes.END_GAME,\r\n      payload: spy\r\n    }\r\n  },\r\n\r\n  setState: (state: Partial<IPlayerState>) => {\r\n    return {\r\n      type: ActionTypes.SET_STATE,\r\n      payload: state\r\n    }\r\n  }\r\n}\r\n\r\nexport default Actions;\r\n","import { ILine, IPlayerRole, IServerMessage } from \"../interfaces/Interfaces\";\r\n\r\nconst url = window.location.protocol === \"https:\" ?\r\n\t\"wss://spydraw-server-5bao3jqrpa-ts.a.run.app\" :\r\n\t\"ws://localhost:8081\"\r\nconst socket = new WebSocket(url);\r\n\r\nexport async function parseTextResponse(response: Response): Promise<string> {\r\n\tif (response.body) {\r\n\t\tconst reader = response.body.getReader();\r\n\t\tconst result = await reader.read();\r\n\t\treturn new TextDecoder(\"utf-8\").decode(result.value)\r\n\t}\r\n\treturn \"\";\r\n}\r\n\r\nexport async function pingServer(): Promise<boolean> {\r\n\treturn new Promise<boolean>(resolve => {\r\n\t\tsocket.addEventListener(\"open\", () => {\r\n\t\t\tresolve(true);\r\n\t\t});\r\n\t}).catch(e => {\r\n\t\tconsole.error(e);\r\n\t\treturn false;\r\n\t});\r\n}\r\n\r\nexport function generateRoomCode(name: string) {\r\n\tconst content = { player: name };\r\n\tsocket.send(JSON.stringify({ type: \"NewRoom\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function submitRoomCode(code: string, player: string) {\r\n\tconst content = { code: code, player: player };\r\n\tsocket.send(JSON.stringify({ type: \"ConnectRoom\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function setPlayerColour(code: string, playerName: string, colour: string) {\r\n\tconst content = { code: code, name: playerName, colour: colour };\r\n\tsocket.send(JSON.stringify({ type: \"SetPlayerColour\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function startRoomGame(code: string) {\r\n\tconst content = { code: code };\r\n\tsocket.send(JSON.stringify({ type: \"StartGame\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function submitLines(code: string, player: string, lines: ILine[], strokeStyle: string, lineWidth: number) {\r\n\tconst content = { code: code, player: player, lines: lines, strokeStyle: strokeStyle, lineWidth: lineWidth };\r\n\tsocket.send(JSON.stringify({ type: \"Draw\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function getRole(code: string, player: string, possibleRoles: IPlayerRole[]) {\r\n\tconst content = { code: code, name: player, possibleRoles: possibleRoles };\r\n\tsocket.send(JSON.stringify({ type: \"GetRole\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function getGameWord(code: string, playerName: string) {\r\n\tconst content = { code: code, name: playerName };\r\n\tsocket.send(JSON.stringify({ type: \"GetWord\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function getFirstPlayer(code: string) {\r\n\tconst content = { code: code };\r\n\tsocket.send(JSON.stringify({ type: \"GetFirstPlayer\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function endTurn(code: string) {\r\n\tconst content = { code: code };\r\n\tsocket.send(JSON.stringify({ type: \"EndTurn\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function startGuess(code: string, playerName: string) {\r\n\tconst content = { code: code, name: playerName };\r\n\tsocket.send(JSON.stringify({ type: \"StartGuess\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function endGuess(code: string) {\r\n\tconst content = { code: code };\r\n\tsocket.send(JSON.stringify({ type: \"EndGuess\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function submitGuess(code: string, guessedName: string) {\r\n\tconst content = { code: code, guessedName: guessedName };\r\n\tsocket.send(JSON.stringify({ type: \"SubmitGuess\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function getState(code: string, playerName: string) {\r\n\tconst content = { code: code, name: playerName };\r\n\tsocket.send(JSON.stringify({ type: \"GetState\", content: JSON.stringify(content) }));\r\n}\r\n\r\nexport function listenForMessage(callback: (data: IServerMessage) => void) {\r\n\tsocket.addEventListener(\"message\", event => {\r\n\t\tif (event.data) {\r\n\t\t\tcallback(JSON.parse(event.data));\r\n\t\t}\r\n\t});\r\n}\r\n","import React from \"react\";\r\nimport \"../../styles/styles.css\"\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\n\r\ninterface IProps {\r\n  room: string;\r\n  open: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nconst ClassName = {\r\n  container: \"modal-body\",\r\n  content: \"modal-invalid-content\",\r\n  button: \"modal-invalid-button\"\r\n}\r\n\r\nfunction InvalidRoomModal(props: IProps) {\r\n\treturn (\r\n    <Modal\r\n      open={props.open}\r\n      onClose={props.onClose}\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n    >\r\n      {\r\n        <div className={ClassName.container}>\r\n          <div className={ClassName.content}>\r\n            Room {props.room} doesn't exist\r\n          </div>\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={() => props.onClose()}\r\n            className={ClassName.button}\r\n          >\r\n            Close\r\n          </Button>\r\n        </div>\r\n      }\r\n    </Modal>\r\n\t);\r\n}\r\n\r\nexport default InvalidRoomModal;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Actions from \"../../redux/actions/Actions\";\r\nimport { submitRoomCode, generateRoomCode } from \"../../utils/serverUtils\";\r\nimport { IPlayerState } from \"../../interfaces/Interfaces\";\r\nimport InvalidRoomModal from \"./InvalidRoomModal\";\r\n\r\nconst ClassName = {\r\n  container: \"container-roomConnect\",\r\n}\r\n\r\nconst RoomConnect = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const [code, setCode] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const [nameError, setNameError] = useState(false);\r\n  const [roomCodeError, setRoomCodeError] = useState(false);\r\n\r\n  const invalidRoom = useSelector<IPlayerState>(state => state.invalidRoom) as boolean;\r\n  const players = useSelector<IPlayerState>(state => state.players) as string[];\r\n\r\n  const history = useHistory();\r\n\r\n  // const iconPath = process.env.PUBLIC_URL + \"/assets/\";\r\n\r\n  useEffect(() => {\r\n    if (!invalidRoom && players.length > 0) {\r\n      dispatch(Actions.setName(name));\r\n      dispatch(Actions.setRoom(code));\r\n      history.push(\"/room\");\r\n    }\r\n  }, [invalidRoom, players]);\r\n\r\n  return (\r\n    <div className={ClassName.container}>\r\n      <InvalidRoomModal\r\n        room={code}\r\n        open={invalidRoom}\r\n        onClose={() => {\r\n          dispatch(Actions.setInvalidRoomCode(false));\r\n        }}\r\n      />\r\n      <div>\r\n        <TextField\r\n          error={nameError}\r\n          value={name}\r\n          color=\"primary\"\r\n          placeholder=\"Enter player name\"\r\n          onChange={event => {\r\n            setName(event.target.value);\r\n            if (nameError) {\r\n              setNameError(false);\r\n            }\r\n          }}\r\n          fullWidth={true}\r\n          inputProps={{\r\n            style: { fontSize: \"calc(10px + 2vmin)\" }\r\n          }}\r\n        />\r\n      </div>\r\n      <p>\r\n        Connect to existing room\r\n      </p>\r\n      <div>\r\n        <TextField\r\n          error={roomCodeError}\r\n          value={code}\r\n          color=\"primary\"\r\n          placeholder=\"Enter room code\"\r\n          onChange={event => {\r\n            setCode(event.target.value);\r\n            if (roomCodeError) {\r\n              setRoomCodeError(false);\r\n            }\r\n          }}\r\n          fullWidth={true}\r\n          inputProps={{\r\n            style: { fontSize: \"calc(10px + 2vmin)\" }\r\n          }}\r\n        />\r\n      </div>\r\n      <div>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={() => {\r\n            if (!name) {\r\n              setNameError(true);\r\n            } else {\r\n              setNameError(false);\r\n            }\r\n            if (!code) {\r\n              setRoomCodeError(true);\r\n            } else {\r\n              setRoomCodeError(false);\r\n            }\r\n            if (name && code) {\r\n              submitRoomCode(code, name);\r\n            }\r\n          }}\r\n          fullWidth={true}\r\n          style={{ fontSize: \"calc(10px + 2vmin)\" }}\r\n        >\r\n          Submit\r\n        </Button>\r\n      </div>\r\n      <p>\r\n        Create new room\r\n      </p>\r\n      <div>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={ () => {\r\n            setRoomCodeError(false);\r\n            if (!name) {\r\n              setNameError(true);\r\n            } else {\r\n              setNameError(false);\r\n              generateRoomCode(name);\r\n              dispatch(Actions.setName(name));\r\n              history.push(\"/room\");\r\n            }\r\n          }}\r\n          fullWidth={true}\r\n          style={{ fontSize: \"calc(10px + 2vmin)\" }}\r\n        >\r\n          New Room\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RoomConnect;\r\n","import React from \"react\";\r\nimport RoomConnect from \"./RoomConnect\";\r\n\r\nconst Landing = () => {\r\n  console.log(\"Connected\");\r\n  return (\r\n    <>\r\n      <div className=\"Banner\">\r\n        <div className=\"PageTitle\">\r\n          Spy Draw\r\n        </div>\r\n      </div>\r\n      <RoomConnect />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Landing;\r\n","import React from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { IPlayerState } from \"../../interfaces/Interfaces\";\r\n\r\nconst ClassName = {\r\n  item: \"item-playerList\",\r\n  row: \"row-playerList\",\r\n  name: \"name-playerList\"\r\n}\r\n\r\nconst PlayerList = () => {\r\n  return (\r\n    <ReactReduxContext.Consumer>\r\n      {({ store }) => {\r\n        const state = store.getState();\r\n        return (\r\n          <>\r\n            <div className={ClassName.row}>\r\n              <div className={ClassName.name}>\r\n                {\r\n                  state.name\r\n                }\r\n              </div>\r\n              {\r\n                !!state.playerColourMap[state.name] &&\r\n                  <div\r\n                    className={ClassName.item}\r\n                    style={{ background: state.playerColourMap[state.name] }}\r\n                  />\r\n              }\r\n            </div>\r\n            <div>\r\n              {\r\n                state.players.map((name: string, index: number) => {\r\n                  if (state.name !== name) {\r\n                    return (\r\n                      <div key={index}>\r\n                        <div className={ClassName.row}>\r\n                          <div className={ClassName.name}>{ name }</div>\r\n                          {\r\n                            !!state.playerColourMap[name] &&\r\n                              <div\r\n                                className={ClassName.item}\r\n                                style={{ background: state.playerColourMap[name] }}\r\n                              />\r\n                          }\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }\r\n                })\r\n              }\r\n            </div>\r\n          </>\r\n        )\r\n      }}\r\n    </ReactReduxContext.Consumer>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: IPlayerState) => {\r\n  return {\r\n    players: state.players,\r\n    playerColourMap: state.playerColourMap\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PlayerList);\r\n","import React from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { setPlayerColour } from \"../../utils/serverUtils\";\r\nimport { IPlayerColourMap, IPlayerState } from \"../../interfaces/Interfaces\";\r\n\r\nconst ClassName = {\r\n  container: \"container-colourPicker\",\r\n  item: \"item-colourPicker\",\r\n  palette: \"palette-colourPicker\",\r\n  unavailable: \"unavailable\",\r\n}\r\n\r\nconst colours = [\r\n  \"#000075\", // Navy\r\n  \"#800000\", // Maroon\r\n  \"#0d8a37\", // Green\r\n  \"#911eb4\", // Purple\r\n  \"#ff0000\", // Red\r\n  \"#0000ff\", // Blue\r\n  \"#f58231\", // Orange\r\n  \"#469990\", // Teal\r\n  \"#9A6324\", // Brown\r\n  \"#f032e6\", // Magenta\r\n  \"#42d4f4\", // Cyan\r\n  \"#808000\", // Olive\r\n]\r\n\r\nconst ColourPicker = () => {\r\n\r\n  const setColour = (roomCode: string, playerName: string, obj: HTMLDivElement) => {\r\n\t\tsetPlayerColour(roomCode, playerName, obj.id);\r\n\t}\r\n\r\n  const colourIsAvailable = (colour: string, playerColourMap: IPlayerColourMap): boolean => {\r\n    for (const player in playerColourMap) {\r\n      if (playerColourMap[player] === colour) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  const getItemClassName = (colour: string, playerColourMap: IPlayerColourMap) => {\r\n    if (colourIsAvailable(colour, playerColourMap)) {\r\n      return `${ClassName.item}`\r\n    }\r\n    return `${ClassName.item} ${ClassName.unavailable}`\r\n  }\r\n\r\n  return (\r\n    <ReactReduxContext.Consumer>\r\n      {({ store }) => {\r\n        const state = store.getState();\r\n        return (\r\n        \t<div className={ClassName.container}>\r\n        \t\t\t<div>Choose Color</div>\r\n              <div className={ClassName.palette}>\r\n                {\r\n                  colours.map((colour, index) => (\r\n            \t\t\t   <div\r\n                      onClick={ e => {\r\n                        if (colourIsAvailable(colour, state.playerColourMap)) {\r\n                          setColour(state.room, state.name, e.target as HTMLDivElement)\r\n                        }\r\n                      }}\r\n                      style={{ background: colour }}\r\n                      id={colour}\r\n                      key={index}\r\n                      className={getItemClassName(colour, state.playerColourMap)}\r\n                    >\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n        \t</div>\r\n      \t);\r\n      }}\r\n    </ReactReduxContext.Consumer>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: IPlayerState) => {\r\n  return {\r\n    room: state.room,\r\n    name: state.name,\r\n    players: state.players,\r\n    playerColourMap: state.playerColourMap,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ColourPicker);\r\n","export interface IPlayerSessionInfo {\r\n  name: string;\r\n  room: string;\r\n}\r\n\r\nexport const SessionStorageKey = \"spydraw_\";\r\n\r\nexport function setPlayerInfo(info: IPlayerSessionInfo): void {\r\n\tsessionStorage.setItem(SessionStorageKey + \"player\", JSON.stringify(info));\r\n}\r\n\r\nexport function getPlayerInfo(): IPlayerSessionInfo | undefined {\r\n  const item = sessionStorage.getItem(SessionStorageKey + \"player\");\r\n  if (item) {\r\n    return JSON.parse(item as string) as IPlayerSessionInfo;\r\n  }\r\n  return undefined;\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { ReactReduxContext, connect, useSelector } from \"react-redux\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PlayerList from \"./PlayerList\";\r\nimport ColourPicker from \"./ColourPicker\";\r\nimport { startRoomGame } from \"../../utils/serverUtils\";\r\nimport { IPlayerState } from \"../../interfaces/Interfaces\";\r\nimport * as SessionStorageUtils from \"../../utils/sessionStorageUtils\";\r\n\r\nconst ClassName = {\r\n  container: \"container-room\",\r\n}\r\n\r\nfunction Room() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const room = useSelector<IPlayerState>(state => state.room) as string;\r\n  const name = useSelector<IPlayerState>(state => state.name) as string;\r\n\r\n  useEffect(() => {\r\n    if (name && room) {\r\n      SessionStorageUtils.setPlayerInfo({\r\n        name: name,\r\n        room: room\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <ReactReduxContext.Consumer>\r\n      {({ store }) => {\r\n        const state = store.getState();\r\n        if (location.pathname !== \"game\" && state.playing) {\r\n          history.push(\"/game\");\r\n        }\r\n        return (\r\n          <div className={ClassName.container}>\r\n            <p>\r\n              Room: { state.room }\r\n            </p>\r\n            <PlayerList />\r\n            <ColourPicker />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                startRoomGame(state.room);\r\n              }}\r\n              fullWidth={true}\r\n              style={{ fontSize: \"calc(10px + 2vmin)\" }}\r\n            >\r\n              Start game\r\n            </Button>\r\n          </div>\r\n        );\r\n      }}\r\n    </ReactReduxContext.Consumer>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: IPlayerState) => {\r\n  return {\r\n    room: state.room,\r\n    playing: state.playing\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Room);\r\n","import React from \"react\";\r\n\r\ninterface IProps {\r\n  setStrokeStyle: (id: string) => void;\r\n  setLineWidth: (width: number) => void;\r\n}\r\n\r\nfunction Palette(props: IProps) {\r\n\r\n\tconst setColor = (obj: HTMLDivElement) => {\r\n\t\tprops.setStrokeStyle(obj.id);\r\n\t\tif (obj.id === \"white\") {\r\n\t\t\tprops.setLineWidth(14);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tprops.setLineWidth(2);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n  \t<>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) }>Choose Color</div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"green\" }} id=\"green\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"blue\" }} id=\"blue\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"red\" }} id=\"red\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"yellow\" }} id=\"yellow\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"orange\" }} id=\"orange\"></div>\r\n  \t\t\t<div onClick={ e => setColor(e.target as HTMLDivElement) } style={{ width: \"10px\", height: \"10px\", background: \"black\" }} id=\"black\"></div>\r\n  \t</>\r\n\t);\r\n}\r\n\r\nexport default Palette;\r\n","import React, { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { IPlayerColourMap, IPlayerState, ILine, ILineFromPlayer, ILineWithStyle } from \"../../interfaces/Interfaces\";\r\nimport { submitLines } from \"../../utils/serverUtils\";\r\nimport Palette from \"./Palette\";\r\n\r\ninterface IProps {\r\n  canDraw: boolean;\r\n  showPalette: boolean;\r\n  onEndStroke: () => void;\r\n}\r\n\r\nfunction Canvas(props: IProps) {\r\n\tconst lines = useSelector<IPlayerState>(state => state.canvasLines) as ILineFromPlayer[];\r\n\tconst roomCode = useSelector<IPlayerState>(state => state.room) as string;\r\n\tconst playerName = useSelector<IPlayerState>(state => state.name) as string;\r\n  const playerColourMap = useSelector<IPlayerState>(state => state.playerColourMap) as IPlayerColourMap;\r\n\tuseSelector<IPlayerState>(state => state.role) as string;\r\n\r\n\tlet strokeStyle = playerColourMap[playerName];\r\n\tlet lineWidth = 2;\r\n\tconst line: ILine = {\r\n\t\tstartX: 0,\r\n\t\tstartY: 0,\r\n\t\tendX: 0,\r\n\t\tendY: 0\r\n\t}\r\n\tlet linesToSend: ILine[] = [];\r\n\tlet alreadySent = false; // If mouseUp, send straight away so this prevents the timer sending\r\n\tlet dotFlag = false;\r\n  let pressedFlag = false;\r\n\r\n\tlet canvas: HTMLCanvasElement;\r\n\tlet ctx: CanvasRenderingContext2D;\r\n\r\n\tuseEffect(() => {\r\n    canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\r\n\t\tif (canvas && props.canDraw) {\r\n      setCanvas();\r\n\t\t\tcanvas.addEventListener(\"mousemove\", handleMouseMove);\r\n\t\t\tcanvas.addEventListener(\"mousedown\", handleMouseDown);\r\n\t\t\tcanvas.addEventListener(\"mouseup\", handleMouseUp);\r\n\t\t\tcanvas.addEventListener(\"mouseout\", handleMouseOut);\r\n      canvas.addEventListener(\"touchmove\", handleMouseMove);\r\n\t\t\tcanvas.addEventListener(\"touchstart\", handleMouseDown);\r\n\t\t\tcanvas.addEventListener(\"touchend\", handleMouseUp);\r\n\t\t\tcanvas.addEventListener(\"touchcancel\", handleMouseOut);\r\n\t\t}\r\n    addLinesFromServer();\r\n    return function cleanup() {\r\n      canvas.removeEventListener(\"mousemove\", handleMouseMove);\r\n      canvas.removeEventListener(\"mousedown\", handleMouseDown);\r\n      canvas.removeEventListener(\"mouseup\", handleMouseUp);\r\n      canvas.removeEventListener(\"mouseout\", handleMouseOut);\r\n      canvas.removeEventListener(\"touchmove\", handleMouseMove);\r\n\t\t\tcanvas.removeEventListener(\"touchstart\", handleMouseDown);\r\n\t\t\tcanvas.removeEventListener(\"touchend\", handleMouseUp);\r\n\t\t\tcanvas.removeEventListener(\"touchcancel\", handleMouseOut);\r\n    }\r\n  }, [props.canDraw]);\r\n\r\n  const handleMouseDown = (e: Event) => {\r\n    pressedFlag = true;\r\n    alreadySent = false;\r\n    setTimeout(() => {\r\n      if (!alreadySent) {\r\n        const adjustedLines = resizeLinesForServer(linesToSend);\r\n        submitLines(roomCode, playerName, adjustedLines, strokeStyle, lineWidth);\r\n        linesToSend = [];\r\n      }\r\n    }, 1000);\r\n    line.startX = line.endX;\r\n    line.startY = line.endY;\r\n    if ((e as MouseEvent).clientX) {\r\n      line.endX = (e as MouseEvent).clientX - canvas.offsetLeft;\r\n      line.endY = (e as MouseEvent).clientY - canvas.offsetTop;\r\n    } else if ((e as TouchEvent).touches) {\r\n      line.endX = (e as TouchEvent).touches[0].clientX - canvas.offsetLeft;\r\n      line.endY = (e as TouchEvent).touches[0].clientY - canvas.offsetTop;\r\n    }\r\n\r\n    dotFlag = true;\r\n    // TODO: send this drawing to server\r\n    if (dotFlag) {\r\n      ctx.beginPath();\r\n      ctx.fillStyle = strokeStyle;\r\n      ctx.fillRect(line.endX, line.endY, 2, 2);\r\n      ctx.closePath();\r\n      dotFlag = false;\r\n    }\r\n  }\r\n\r\n  const handleMouseMove = (e: Event) => {\r\n    e.preventDefault();\r\n    if (pressedFlag) {\r\n      line.startX = line.endX;\r\n      line.startY = line.endY;\r\n      if ((e as MouseEvent).clientX) {\r\n        line.endX = (e as MouseEvent).clientX - canvas.offsetLeft;\r\n        line.endY = (e as MouseEvent).clientY - canvas.offsetTop;\r\n      } else if ((e as TouchEvent).touches) {\r\n        line.endX = (e as TouchEvent).touches[0].clientX - canvas.offsetLeft;\r\n        line.endY = (e as TouchEvent).touches[0].clientY - canvas.offsetTop;\r\n      }\r\n      linesToSend.push(Object.assign({}, line));\r\n      draw(line);\r\n    }\r\n  }\r\n\r\n  const handleMouseUp = () => {\r\n    if (pressedFlag && !alreadySent) {\r\n      const adjustedLines = resizeLinesForServer(linesToSend);\r\n      submitLines(roomCode, playerName, adjustedLines, strokeStyle, lineWidth);\r\n      linesToSend = [];\r\n      props.onEndStroke();\r\n    }\r\n    pressedFlag = false;\r\n  }\r\n\r\n  const handleMouseOut = () => {\r\n    handleMouseUp();\r\n  }\r\n\r\n\tconst draw = (line: ILine | ILineFromPlayer | ILineWithStyle) => {\r\n\t\tsetCanvas();\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(line.startX, line.startY);\r\n\t\tctx.lineTo(line.endX, line.endY);\r\n    if (\"playerName\" in line) {\r\n\t\t\tctx.strokeStyle = playerColourMap[line.playerName];\r\n    } else if (playerColourMap[playerName]) {\r\n\t\t\tctx.strokeStyle = playerColourMap[playerName];\r\n\t\t} else if (\"strokeStyle\" in line) {\r\n\t\t\tctx.strokeStyle = line.strokeStyle;\r\n\t\t} else {\r\n\t\t\tctx.strokeStyle = strokeStyle;\r\n\t\t}\r\n\t\tif (\"lineWidth\" in line) {\r\n\t\t\tctx.lineWidth = line.lineWidth;\r\n\t\t} else {\r\n\t\t\tctx.lineWidth = lineWidth;\r\n\t\t}\r\n\t\tctx.stroke();\r\n\t\tctx.closePath();\r\n\t}\r\n\r\n\tconst addLinesFromServer = () => {\r\n    const adjustedLines = resizeLinesForCanvas(lines);\r\n\t\tfor (const line of adjustedLines) {\r\n\t\t\tdraw(line);\r\n\t\t}\r\n\t}\r\n\r\n\tconst setCanvas = () => {\r\n\t\tif (!ctx) {\r\n\t\t\tif (!canvas) {\r\n\t\t\t\tcanvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\r\n\t\t\t}\r\n\t\t\tctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n\t\t}\r\n\t}\r\n\r\n  const setStrokeStyle = (id: string) => {\r\n    strokeStyle = id;\r\n  }\r\n\r\n  const setLineWidth = (width: number) => {\r\n    lineWidth = width;\r\n  }\r\n\r\n  let canvasWidth = 0.8 * window.innerWidth;\r\n  let canvasHeight = canvasWidth;\r\n  if (canvasHeight > window.innerHeight) {\r\n    canvasWidth = 0.6 * window.innerHeight;\r\n    canvasHeight = canvasWidth;\r\n  }\r\n\r\n  const resizeLinesForCanvas = (lines: ILineFromPlayer[]): ILineFromPlayer[] => {\r\n    const adjustedLines: ILineFromPlayer[] = [];\r\n    for (const line of lines) {\r\n      adjustedLines.push({\r\n        startX: line.startX * canvasWidth,\r\n        endX: line.endX * canvasWidth,\r\n        startY: line.startY * canvasHeight,\r\n        endY: line.endY * canvasHeight,\r\n        playerName: line.playerName,\r\n      });\r\n    }\r\n    return adjustedLines;\r\n  }\r\n\r\n  const resizeLinesForServer = (lines: ILine[]): ILine[] => {\r\n    const adjustedLines = [];\r\n    for (const line of lines) {\r\n      adjustedLines.push({\r\n        startX: line.startX / canvasWidth,\r\n        endX: line.endX / canvasWidth,\r\n        startY: line.startY / canvasHeight,\r\n        endY: line.endY / canvasHeight,\r\n      });\r\n    }\r\n    return adjustedLines;\r\n  }\r\n\r\n  window.onresize = () => {\r\n    // TODO: re-render to adjust canvas size\r\n  }\r\n\r\n\treturn (\r\n  \t<>\r\n  \t\t\t<canvas\r\n          id=\"canvas\"\r\n          width={canvasWidth}\r\n          height={canvasHeight}\r\n          style={{\r\n            border: \"2px solid\"\r\n          }}\r\n        />\r\n        {\r\n          props.showPalette &&\r\n    \t\t\t<Palette\r\n            setStrokeStyle={id => setStrokeStyle(id)}\r\n            setLineWidth={width => setLineWidth(width)}\r\n          />\r\n        }\r\n  \t\t\t<img id=\"canvasimg\" style={{ position: \"absolute\", top: \"10%\", left: \"52%\" }} />\r\n  \t</>\r\n\t);\r\n}\r\n\r\nexport default Canvas;\r\n","import React from \"react\";\r\nimport \"../../styles/styles.css\"\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport { submitGuess } from \"../../utils/serverUtils\";\r\nimport { IPlayerColourMap } from \"../../interfaces/Interfaces\";\r\n\r\ninterface IProps {\r\n  name: string;\r\n  room: string;\r\n  playerNames: string[];\r\n  open: boolean;\r\n  onClose: () => void;\r\n  guessingPlayer: string;\r\n  playerColourMap: IPlayerColourMap;\r\n}\r\n\r\nconst ClassName = {\r\n  container: \"modal-body\"\r\n}\r\n\r\nfunction GuessSpyPanel(props: IProps) {\r\n  const onSubmit = (name: string) => {\r\n    submitGuess(props.room, name);\r\n    props.onClose();\r\n  }\r\n\r\n\treturn (\r\n    <Modal\r\n      open={props.open}\r\n      onClose={props.onClose}\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n    >\r\n      {\r\n        <div className={ClassName.container}>\r\n          {\r\n            props.guessingPlayer === props.name ?\r\n              props.playerNames.map((name, index) => {\r\n                if (name !== props.name) {\r\n                  return <Button\r\n                    variant=\"contained\"\r\n                    onClick={() => onSubmit(name)}\r\n                    key={index}\r\n                    style={{\r\n                      backgroundColor: props.playerColourMap ? props.playerColourMap[name] : \"black\",\r\n                      color: \"#fff\"\r\n                    }}\r\n                  >\r\n                    {name}\r\n                  </Button>\r\n                }\r\n              })\r\n            :\r\n              <div>{props.guessingPlayer} is guessing!</div>\r\n          }\r\n        </div>\r\n      }\r\n    </Modal>\r\n\t);\r\n}\r\n\r\nexport default GuessSpyPanel;\r\n","import React from \"react\";\r\nimport \"../../styles/styles.css\"\r\nimport Button from \"@material-ui/core/Button\";\r\nimport GuessSpyPanel from \"./GuessSpyPanel\";\r\nimport { endGuess, startGuess } from \"../../utils/serverUtils\";\r\nimport { IPlayerColourMap } from \"../../interfaces/Interfaces\";\r\n\r\ninterface IProps {\r\n\troom: string;\r\n\tname: string;\r\n\trole: string;\r\n\tplayerNames: string[];\r\n\tguessingPlayer: string;\r\n\tplayerColourMap: IPlayerColourMap\r\n\tword?: string;\r\n}\r\n\r\nconst ClassName = \"container-infoPanel\";\r\n\r\nfunction InfoPanel(props: IProps) {\r\n\tconst onGuessPressed = () => {\r\n\t\tstartGuess(props.room, props.name);\r\n\t}\r\n\r\n\tconst onClose = () => {\r\n\t\tendGuess(props.room);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={ClassName}>\r\n\t\t\t<div>Room: {props.room}</div>\r\n\t\t\t<div>Role: {props.role}</div>\r\n\t\t\t{\r\n\t\t\t\t!!props.word &&\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div>Word: {props.word}</div>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => onGuessPressed()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tGuess the spy\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t<GuessSpyPanel\r\n\t\t\t\tkey={props.guessingPlayer}\r\n\t\t\t\tname={props.name}\r\n\t\t\t\troom={props.room}\r\n\t\t\t\tplayerNames={props.playerNames}\r\n\t\t\t\topen={!!props.guessingPlayer}\r\n\t\t\t\tonClose={() => onClose()}\r\n\t\t\t\tguessingPlayer={props.guessingPlayer}\r\n\t\t\t\tplayerColourMap={props.playerColourMap}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default InfoPanel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"../../styles/styles.css\"\r\n\r\ninterface IProps {\r\n\tstartingSeconds: number,\r\n  gameEnded: boolean,\r\n}\r\n\r\nconst ClassName = \"container-infoPanel\";\r\n\r\nfunction Timer(props: IProps) {\r\n  const [ timerSeconds, setTimerSeconds ] = useState<number>(props.startingSeconds);\r\n\r\n  useEffect(() => {\r\n    if (timerSeconds > 0 && !props.gameEnded) {\r\n      setTimeout(() => {\r\n        setTimerSeconds(timerSeconds - 1);\r\n      }, 1000);\r\n    }\r\n  });\r\n\r\n  const convertSecondsToTimer = (seconds: number): string => {\r\n    const minutes = Math.floor(seconds / 60);\r\n    const remainingSeconds = seconds - minutes * 60;\r\n    const minutesDisplay = minutes < 10 ? `0${minutes}` : `${minutes}`;\r\n    const secondsDisplay = remainingSeconds < 10 ? `0${remainingSeconds}` : `${remainingSeconds}`;\r\n    return `${minutesDisplay}:${secondsDisplay}`;\r\n  }\r\n\r\n\treturn (\r\n\t\t<div className={ClassName}>\r\n      <span id=\"time\">{ convertSecondsToTimer(timerSeconds) }</span>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Timer;\r\n","import React from \"react\";\r\nimport \"../../styles/styles.css\"\r\n\r\ninterface IProps {\r\n  guessedSpy: boolean;\r\n  spy: string;\r\n  playerName: string;\r\n}\r\n\r\nconst ClassName = \"container-gameEnd\";\r\n\r\nfunction GameEnd(props: IProps) {\r\n  const renderGameEnd = (): JSX.Element => {\r\n    if (props.guessedSpy && props.spy === props.playerName) {\r\n      return <div>Guess the word!</div>\r\n    } else if (props.guessedSpy) {\r\n      return <div>{props.spy}, guess the word!</div>\r\n    } else if (props.spy === props.playerName) {\r\n      return <div>{props.spy} wins!</div>\r\n    }\r\n    return <div>You win!</div>\r\n  }\r\n\r\n\treturn (\r\n\t\t<div className={ClassName}>\r\n      { renderGameEnd() }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default GameEnd;\r\n","import React, { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { IPlayerColourMap, IPlayerRole, IPlayerState } from \"../../interfaces/Interfaces\";\r\nimport { endTurn, getFirstPlayer, getGameWord, getRole } from \"../../utils/serverUtils\";\r\nimport Actions from \"../../redux/actions/Actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Canvas from \"../canvas/Canvas\";\r\nimport InfoPanel from \"./InfoPanel\";\r\nimport Timer from \"./Timer\";\r\nimport GameEnd from \"./GameEnd\";\r\n\r\nconst DEFAULT_ROLE = \"Friend\";\r\n\r\nconst EXTRA_ROLES: IPlayerRole[] = [\r\n  {\r\n    roleName: \"Spy\",\r\n    roleCount: 1\r\n  }\r\n]\r\n\r\ninterface IGameState {\r\n  time: number,\r\n  roomCode: string,\r\n  word: string,\r\n  playerName: string,\r\n  possibleRoles: IPlayerRole[],\r\n  players: string[],\r\n  activePlayer: string,\r\n  guessingPlayer: string,\r\n  role: string,\r\n  playerColourMap: IPlayerColourMap,\r\n  gameEnded: boolean,\r\n  guessedSpy: boolean,\r\n  spy: string,\r\n  playing: boolean,\r\n}\r\n\r\nfunction Game() {\r\n\tconst dispatch = useDispatch();\r\n\r\n  const gameState = useSelector<IPlayerState>(state => (\r\n    {\r\n      time: state.time,\r\n      roomCode: state.room,\r\n      word: state.gameWord,\r\n      playerName: state.name,\r\n      possibleRoles: state.possibleRoles,\r\n      players: state.players,\r\n      activePlayer: state.activePlayer,\r\n      guessingPlayer: state.guessingPlayer,\r\n      role: state.role,\r\n      gameEnded: state.gameEnded,\r\n      guessedSpy: state.guessedSpy,\r\n      spy: state.spy,\r\n      playing: state.playing,\r\n    }\r\n  )) as IGameState;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (gameState.possibleRoles.length === 0) {\r\n\t\t\tconst playerCount = Object.keys(gameState.players).length;\r\n\t\t\tlet totalExtraRoles = 0;\r\n\t\t\tfor (const role of EXTRA_ROLES) {\r\n\t\t\t\ttotalExtraRoles += role.roleCount;\r\n\t\t\t}\r\n\t\t\tconst defaultRole: IPlayerRole = {\r\n\t\t\t\troleName: DEFAULT_ROLE,\r\n\t\t\t\troleCount: playerCount - totalExtraRoles\r\n\t\t\t}\r\n\t\t\tconst allRoles = EXTRA_ROLES.concat(defaultRole);\r\n\t\t\tdispatch(Actions.setPossibleRoles(allRoles));\r\n      if (gameState.playing) {\r\n  \t\t\tgetRole(gameState.roomCode, gameState.playerName, allRoles);\r\n  \t\t\tgetGameWord(gameState.roomCode, gameState.playerName);\r\n        getFirstPlayer(gameState.roomCode);\r\n      } else {\r\n        dispatch(Actions.setPlaying(true));\r\n      }\r\n\t\t}\r\n  });\r\n\r\n  const isActivePlayer = () => {\r\n    return gameState.playerName === gameState.activePlayer;\r\n  }\r\n\r\n\tconst onEndStroke = () => {\r\n\t\tendTurn(gameState.roomCode);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n      <Timer\r\n        startingSeconds={gameState.time}\r\n        gameEnded={gameState.gameEnded}\r\n      />\r\n      {\r\n        !gameState.gameEnded ?\r\n          <>\r\n            {\r\n              isActivePlayer() ?\r\n                <p>\r\n                  Your turn!\r\n                </p>\r\n              :\r\n                <p>\r\n                  {gameState.activePlayer}'s turn'!\r\n                </p>\r\n            }\r\n      \t\t\t{\r\n      \t\t\t\t!!gameState.role ?\r\n      \t\t\t\t\t<>\r\n      \t\t\t\t\t\t<InfoPanel\r\n      \t\t\t\t\t\t\troom={gameState.roomCode}\r\n                    name={gameState.playerName}\r\n      \t\t\t\t\t\t\trole={gameState.role}\r\n      \t\t\t\t\t\t\tword={gameState.word}\r\n                    playerNames={gameState.players}\r\n                    guessingPlayer={gameState.guessingPlayer}\r\n                    playerColourMap={gameState.playerColourMap}\r\n      \t\t\t\t\t\t/>\r\n      \t\t\t\t\t\t<Canvas\r\n                    canDraw={isActivePlayer()}\r\n                    showPalette={false}\r\n      \t\t\t\t\t\t\tonEndStroke={() => onEndStroke()}\r\n                  />\r\n      \t\t\t\t\t</>\r\n      \t\t\t\t:\r\n      \t\t\t\t\t<div>\r\n      \t\t\t\t\t\tAssigning roles...\r\n      \t\t\t\t\t</div>\r\n      \t\t\t}\r\n          </>\r\n        :\r\n          <>\r\n            <GameEnd\r\n              guessedSpy={gameState.guessedSpy}\r\n              spy={gameState.spy}\r\n              playerName={gameState.playerName}\r\n            />\r\n          </>\r\n      }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Game;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Landing from \"./components/landing/Landing\";\r\nimport Room from \"./components/room/Room\";\r\nimport Game from \"./components/game/Game\";\r\nimport Actions from \"./redux/actions/Actions\";\r\nimport \"./App.css\";\r\nimport { IServerMessage, ILine, ILineFromPlayer } from \"./interfaces/Interfaces\";\r\nimport { listenForMessage, getState, pingServer } from \"./utils/serverUtils\";\r\nimport * as SessionStorageUtils from \"./utils/sessionStorageUtils\";\r\n\r\nenum ConnectState {\r\n  LOADING,\r\n  CONNECTED,\r\n  FAILED\r\n}\r\n\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n  const [ connected, setConnected ] = useState<ConnectState>(ConnectState.LOADING);\r\n\r\n  useEffect(() => {\r\n    const attemptConnection = async () => {\r\n      let success = false;\r\n      try {\r\n        success = await pingServer();\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n      if (success) {\r\n        listenForMessage(handleServerMessage);\r\n        const info = SessionStorageUtils.getPlayerInfo();\r\n        if (info) {\r\n          getState(info.room, info.name);\r\n        }\r\n        if (connected !== ConnectState.CONNECTED) {\r\n          setConnected(ConnectState.CONNECTED);\r\n        }\r\n      } else {\r\n        if (connected !== ConnectState.FAILED) {\r\n          setConnected(ConnectState.FAILED);\r\n        }\r\n      }\r\n    }\r\n    attemptConnection();\r\n  }, []);\r\n\r\n  const handleServerMessage = (message: IServerMessage) => {\r\n    switch (message.type) {\r\n      case \"NewRoom\":\r\n        let code: string;\r\n        if (!message.content || !message.content.code) {\r\n          code = \"ERROR\"\r\n        } else {\r\n          code = message.content.code;\r\n        }\r\n        dispatch(Actions.setRoom(code));\r\n        break;\r\n      case \"ConnectRoom\":\r\n        if (message.content.invalid) {\r\n          dispatch(Actions.setInvalidRoomCode(true));\r\n        } else {\r\n          dispatch(Actions.setPlayers(message.content.players));\r\n        }\r\n        break;\r\n      case \"SetPlayerColour\":\r\n        dispatch(Actions.setPlayerColour(message.content.name, message.content.colour));\r\n        break;\r\n      case \"StartGame\":\r\n        dispatch(Actions.setTime(message.content.time));\r\n        dispatch(Actions.setPlaying(true));\r\n        break;\r\n      case \"GetRole\":\r\n        dispatch(Actions.setRole(message.content.role));\r\n        break;\r\n      case \"GetWord\":\r\n        dispatch(Actions.setGameWord(message.content.word));\r\n        break;\r\n      case \"Draw\":\r\n        const linesFromPlayer: ILineFromPlayer[] = [];\r\n        for (const line of message.content.lines as ILine[]) {\r\n          linesFromPlayer.push({\r\n            startX: line.startX,\r\n            startY: line.startY,\r\n            endX: line.endX,\r\n            endY: line.endY,\r\n            playerName: message.content.name as string,\r\n          })\r\n        }\r\n        dispatch(Actions.addLines(linesFromPlayer));\r\n        break;\r\n      case \"EndTurn\":\r\n      case \"GetFirstPlayer\":\r\n        dispatch(Actions.setActivePlayer(message.content.activePlayer));\r\n        break;\r\n      case \"StartGuess\":\r\n        dispatch(Actions.startGuess(message.content.name));\r\n        break;\r\n      case \"EndGuess\":\r\n        dispatch(Actions.endGuess());\r\n        break;\r\n      case \"SubmitGuess\":\r\n        dispatch(Actions.submitGuess(message.content.correct));\r\n        break;\r\n      case \"EndGame\":\r\n        dispatch(Actions.endGame(message.content.spy));\r\n        break;\r\n      case \"GetState\":\r\n        dispatch(Actions.setState(message.content.state));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  if (connected === ConnectState.FAILED) {\r\n    return (\r\n      <div className=\"App\">\r\n        <p>Failed to connect to server</p>\r\n      </div>\r\n    )\r\n  } else {\r\n    return (\r\n      <div className=\"App\">\r\n        <Router>\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <Landing />\r\n            </Route>\r\n            <Route exact path=\"/room\">\r\n              <Room />\r\n            </Route>\r\n            <Route exact path=\"/game\">\r\n              <Game />\r\n            </Route>\r\n          </Switch>\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: any) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won\"t work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl: string = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let\"s check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config: any) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It\"s the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config: any) {\r\n  // Check if the service worker can be found. If it can\"t reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import * as Interfaces from \"../../interfaces/Interfaces\";\r\nimport * as ActionTypes from \"../actions/ActionTypes\";\r\n\r\ntype IReducerFunction = (\r\n  state: Interfaces.IPlayerState | undefined,\r\n  action: any\r\n) => Interfaces.IPlayerState;\r\n\r\nconst initialState: Interfaces.IPlayerState = {\r\n  room: \"\",\r\n  name: \"\",\r\n  players: [],\r\n  playerColourMap: {},\r\n  activePlayer: \"\",\r\n  canvasLines: [],\r\n  playing: false,\r\n  role: \"\",\r\n  possibleRoles: [],\r\n  gameWord: \"\",\r\n  guessingPlayer: \"\",\r\n  time: -1,\r\n  guessedSpy: false,\r\n  gameEnded: false,\r\n  spy: \"\",\r\n  invalidRoom: false,\r\n};\r\n\r\nconst RootReducer: IReducerFunction = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ActionTypes.SET_ROOM:\r\n      const room = action.payload as string;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\troom: room\r\n\t\t\t};\r\n    case ActionTypes.SET_NAME:\r\n      const name = action.payload as string;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\t\tcase ActionTypes.ADD_PLAYER:\r\n\t\t\tconst names = action.payload as string[];\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\tplayers: names\r\n\t\t\t};\r\n    case ActionTypes.SET_INVALID_ROOM:\r\n\t\t\tconst invalid = action.payload as boolean;\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\tinvalidRoom: invalid\r\n\t\t\t};\r\n    case ActionTypes.SET_PLAYER_COLOUR:\r\n\t\t\tconst playerName = (action.payload as Interfaces.IPlayerColourAction).playerName;\r\n      const colour = (action.payload as Interfaces.IPlayerColourAction).colour;\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\tplayerColourMap: {\r\n          ...state.playerColourMap,\r\n          [playerName]: colour\r\n        }\r\n\t\t\t};\r\n    case ActionTypes.SET_POSSIBLE_ROLES:\r\n\t\t\tconst roles = action.payload as Interfaces.IPlayerRole[];\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\tpossibleRoles: roles\r\n\t\t\t};\r\n    case ActionTypes.SET_ROLE:\r\n\t\t\tconst role = action.payload as string;\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\trole: role\r\n\t\t\t};\r\n\t\tcase ActionTypes.SET_PLAYING:\r\n\t\t\tconst playing = action.payload as boolean;\r\n      return {\r\n\t\t\t\t...state,\r\n\t\t\t\tplaying: playing\r\n\t\t\t};\r\n    case ActionTypes.SET_TIME:\r\n      const time = action.payload as number;\r\n      return {\r\n        ...state,\r\n        time: time\r\n      }\r\n    case ActionTypes.ADD_LINES:\r\n      const lines = action.payload as Interfaces.ILineFromPlayer[];\r\n      return {\r\n        ...state,\r\n        canvasLines: [ ...state.canvasLines, ...lines ]\r\n      }\r\n    case ActionTypes.SET_ACTIVE_PLAYER:\r\n      const activePlayer = action.payload as string;\r\n      return {\r\n        ...state,\r\n        activePlayer: activePlayer\r\n      }\r\n    case ActionTypes.SET_GAME_WORD:\r\n      const word = action.payload as string;\r\n      return {\r\n        ...state,\r\n        gameWord: word\r\n      }\r\n    case ActionTypes.SET_GUESSING:\r\n      const guessingPlayer = (action.payload as Interfaces.ISetGuessingAction).playerName;\r\n      const isGuessing = (action.payload as Interfaces.ISetGuessingAction).guessing;\r\n      return {\r\n        ...state,\r\n        guessingPlayer: isGuessing ? guessingPlayer : \"\"\r\n      }\r\n    case ActionTypes.SET_CORRECT_GUESS:\r\n      const guessedSpy = action.payload as boolean;\r\n      return {\r\n        ...state,\r\n        guessedSpy: guessedSpy\r\n      }\r\n    case ActionTypes.END_GAME:\r\n      const spy = action.payload as string;\r\n      return {\r\n        ...state,\r\n        gameEnded: true,\r\n        spy: spy\r\n      }\r\n    case ActionTypes.SET_STATE:\r\n      const partialState = action.payload as Partial<Interfaces.IPlayerState>;\r\n      return {\r\n        ...state,\r\n        ...partialState\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default RootReducer;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { createPlayerStore } from \"./redux/datastore/StoreManager\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nconst store = createPlayerStore();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={ store }>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import { createStore } from \"redux\";\r\nimport RootReducer from \"../reducers/RootReducer\";\r\n\r\nexport const createPlayerStore = () => {\r\n  return createStore(RootReducer, (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__());\r\n}\r\n"],"sourceRoot":""}